<!doctype html>

<html lang="fr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alegreya:ital,wght@0,400..900;1,400..900&display=swap"
        rel="stylesheet">
    <title>M√ñRK BORG - G√©n√©rateur de Personnages</title>
    <meta name="description" content="M√ñRK BORG - G√©n√©rateur de Personnages">
    <meta name="author" content="FX Nicolas">
    <meta name="keywords"
        content="Mork Borg, M√ñRK BORG, MorkBorg, M√ñRKBORG, RPG, Role Playing Game, Generator, G√©n√©rateur, Character, Personnage">
    <meta name="license" content="M√ñRK BORG Third Party License">
    <meta name="lang" content="fr">
    <style type="text/css">
        @media print {

            header,
            footer {
                display: none;
            }

            body {
                margin: 0px;
                padding: 0px;
            }

        }

        body {
            font-family: "Alegreya", serif;
            font-optical-sizing: auto;
            font-style: normal;
            font-size: clamp(0.5rem, calc(0.5rem + 0.5vw), 2.5rem);

        }

        #character {
            background-image: linear-gradient(rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.25)), url('mork-borg-character-sheet-background.png');
            background-position: center top;
            background-repeat: no-repeat;
            aspect-ratio: 297 / 210;
            background-size: contain;
            position: relative;
        }

        #character .print {
            display: block;
            position: absolute;
        }

        #character_notes {
            margin: 40px;
        }

        #character_notes>h2 {
            margin-bottom: 5px;
        }

        #character_notes>div {
            margin-top: 5px;
            margin-left: 10px;
        }

        ol,
        ul {
            margin-top: 0px;
            margin-bottom: 0px;

        }

        /* Name and Class */

        #name {
            transform: translate(0%, -50%);
            left: 10%;
            top: 10.8%;
            width: 23.5%;
            height: 5%;
            font-weight: bold;
            border: 0px solid black;
            font-size: clamp(20%, 200%, 300%);
            /* shrinks naturally on small screens */
            text-wrap: nowrap;
            /* font-size: 250%; */
        }

        #class_name {
            font-size: 140%;
            transform: translate(0%, -50%);
            left: 11%;
            top: 45.75%;
            width: 22.5%;
            font-weight: bold;
            text-align: left;
            border: 0px solid black;
        }

        /* attributes */

        .attribute {
            font-size: 300%;
            transform: translate(-50%, -50%);
            font-weight: 800;
        }

        #force {
            left: 53%;
            top: 36%;
        }

        #agilit√© {
            left: 52%;
            top: 47%;
        }

        #pr√©sence {
            left: 52.5%;
            top: 62%;
        }

        #endurance {
            left: 43%;
            top: 77%;
        }

        /* HP, Omens and powers */

        #max_hp {
            transform: translate(-50%, -50%);
            font-size: 300%;
            font-weight: 800;
            left: 52%;
            top: 12%;
        }

        #omens_dice {
            transform: translate(-50%, -50%);
            font-size: 300%;
            left: 58%;
            top: 90%;
            color: white;
        }

        /* Description and Class Features */

        #description {
            font-size: 80%;
            margin: 0px;
            padding: 0px;
            left: 5.3%;
            top: 19%;
            width: 28%;
            height: 20%;
            border: 0px solid black;
            text-align: left;
        }

        #description>p {
            margin-bottom: 1% !important;
        }

        #skills_short {
            margin: 0px;
            padding: 0px;
            left: 5.7%;
            top: 47%;
            width: 28%;
            height: 13%;
            border: 0px solid black;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            line-clamp: 3;
            /* number of visible lines */
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
            /* responsive width */
        }

        #skills {
            display: block !important;
        }

        #description>p,
        #skills>p,
        #skills_short>p,
        #traits>p {
            margin: 0px;
            padding: 0px;
            font-size: 110%
        }

        /* Weapon and Armor */

        #weapon {
            font-size: 120%;
            margin: 0px;
            padding: 0px;
            left: 64%;
            top: 5.3%;
            width: 25%;
            height: 5%;
            border: 0px solid black;
            columns: 1;
            column-gap: 0.5rem;
            list-style: none;
        }

        #weapon_2 {
            font-size: 120%;
            margin: 0px;
            padding: 0px;
            left: 67%;
            top: 14.5%;
            width: 27%;
            height: 4%;
            border: 0px solid black;
            columns: 1;
            column-gap: 0.5rem;
            list-style: none;
        }

        #armor {
            font-size: 120%;
            margin: 0px;
            padding: 0px;
            left: 67%;
            top: 23.8%;
            width: 20%;
            height: 5%;
            border: 0px solid black;
            columns: 1;
            column-gap: 0.5rem;
            list-style: none;
        }

        #weapon>.small,
        #weapon_2>.small,
        #armor>.small {
            font-size: 80%;
            line-height: 70%;
        }

        /* Equipment & scrolls */

        #scrolls {
            font-size: 110%;
            margin: 0px;
            padding: 0px;
            left: 5.3%;
            top: 66.6%;
            width: 26%;
            height: 25%;
            columns: 1;
            column-gap: 0.5rem;
            list-style: none;
            border: 0px solid black;
        }

        #scrolls>li {
            border: 0px solid red;
            height: 26%;
            line-height: 100%;
            padding-bottom: 1%;
        }

        #scrolls>li>.small {
            font-size: 70%;
            line-height: 70%;
        }

        .small>ol,
        .small>ul {
            line-height: 100%;
            padding-left: 20px;
        }

        #equipment {
            font-size: 110%;
            margin: 0px;
            padding: 0px;
            left: 62.8%;
            top: 35.3%;
            width: 14.7%;
            height: 53.5%;
            border: 0px solid black;
            columns: 1;
            column-gap: 0.5rem;
            list-style: none;
        }


        #equipment>li {
            border: 0px solid red;
            height: 11.3%;
            line-height: 100%;
            padding-top: 1%;
            margin-bottom: 2%;
        }

        #equipment>li>.small {
            font-size: 80%;
            line-height: 70%;
        }

        #money {
            transform: translate(-50%, -50%);
            font-size: 150%;
            left: 73.5%;
            top: 91.5%;
        }

        /* hidden elements */

        #omens {
            display: none !important;
        }

        #powers {
            display: none !important;
        }

        /* Menu */


        button,
        select {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            border-style: solid;
            overflow: hidden;
            font-family: inherit;
            text-transform: inherit;
            font-weight: inherit;
            font-style: inherit;
            text-decoration: inherit;
            color: inherit;
            font-size: inherit;
            letter-spacing: inherit;
        }

        button:hover,
        select:hover {
            cursor: pointer;
            background-color: rgb(255, 233, 000);
        }

        button:disabled,
        select:disabled {
            opacity: 0.5;
        }

        /* Original CSS */

        ul {
            padding-left: 15px
        }


        body>footer {
            position: sticky;
            top: 100vh;
        }

        footer>pre {
            white-space: pre-wrap;
        }


        #menu>button {
            margin: 3px;
        }

        .top {
            width: 500px
        }

        @media only screen and (max-width: 500px) {
            .top {
                width: auto;
            }

            h1 {
                font-size: 18px;
            }

            #logo {
                display: none;
            }
        }

        /* #picker_label:hover {
            color: white;
            background: #181818;
        } */
    </style>
</head>

<body>
    <header>
        <h1 style="text-align: center">
            G√©n√©rateur de Personnage
            <br>
            <img id='logo' src="compatible-with-mork-borg-horizontal.svg" alt="Compatible with M√∂rk Borg Logo"
                width=150 />
        </h1>
        <div id="menu">
            <span id="klass">
                <label for="klass_selector">Classe</label>
                <select id="klass_selector">
                    <option id="random" value="-1">&lt;Al√©atoire&gt;</option>
                    <option id="ws" value="0">Racaille &lt;Aucune&gt;</option>
                    <option id="fd" value="1">D√©serteur √† Crocs</option>
                    <option id="gs" value="2">Rat des √âgouts</option>
                    <option id="eh" value="3">Ermite √âsot√©rique</option>
                    <option id="wr" value="4">Noble Mis√©rable</option>
                    <option id="he" value="5">Pr√™tre H√©r√©tique</option>
                    <option id="oh" value="6">Herboriste Occulte</option>
                    <option id="fo" value="7">Philosophe D√©sol√©</option>
                    <option id="dgp" value="8">Proph√®te d'un Dieu Mort</option>
                    <option id="po" value="9">P√¢le</option>
                    <option id="cs" value="10">M√©tamorphe Maudit</option>
                    <option id="ss" value="11">Oiseau Chanteur Sacril√®ge</option>
                </select>
                <button id="generate">ü§û G√©n√©rer</button>
            </span>
            |
            <button id="edit" title="Editer le personnage manuellement.">‚úèÔ∏è Mode Edition</button>
            <button id="stop" title="Sortir du mode √©dition." style="display: none;">ü§û Mode G√©n√©ration</button>
            <button id="save_edits" title="Sauvegarder personnage" style="display: none;">üíæ Sauvegarder</button>
            <button id="restore" title="Restaurer la sauvegarde" style="display: none;">üì¶ Restaurer</button>
            <button id="share" title="Partager">üëç Partager</button>
            <button id="delete" title="Supprimer le personage sauvegard√©" style="display: none;">üóëÔ∏è Supprimer</button>
            <span style='display: none; background: #FF3EB5; color: white; padding: 1px 5px;' id='status'></span>

        </div>
        <div id=attributes style="display: none;">
            <hr>
            Attributs d'Excellence (2 Max):
            <form>
                <div style="display: inline-block;">
                    <input type="checkbox" id="agi" name="agilit√©" value=0>
                    <label for="agi">
                        <b>AGILIT√â</b>
                        <span>D√©fense, √©quilibre, nager, fuir</span>
                    </label>
                    <br>
                    <input type="checkbox" id="pre" name="pr√©sence" value=1>
                    <label for="pre">
                        <b>PR√âSENCE</b>
                        <span>Percevoir, viser, charmer, manierles Pouvoirs</span>
                    </label>
                </div>
                <div style="display: inline-block;">
                    <input type="checkbox" id="for" name="force" value=2>
                    <label for="for">
                        <b>FORCE</b>
                        <span>√âcraser, soulever, frapper, agripper</span>
                    </label>
                    <br>
                    <input type="checkbox" id="end" name="endurance" value=3>
                    <label for="end">
                        <b>ENDURANCE</b>
                        <span>R√©sister au poison/froid/chaud, aux chutes</span>
                    </label>
                </div>
            </form>
        </div>

        <div id="saved_souls">
            <hr>
            Personnages Sauvegard√©s<br>
            <span id="souls"></span>
        </div>
        <hr style="margin: 0px;">
    </header>
    <div id=character>
        <span id="name" class="edit print"></span>
        <span id="class_name" class="print"></span>
        <span id="agilit√©" class="edit print attribute"></span>
        <span id="pr√©sence" class="edit print attribute"></span>
        <span id="force" class="edit print attribute"></span>
        <span id="endurance" class="edit print attribute"></span>
        <span id="max_hp" class="edit print"></span>
        <span id="omens" class="edit print"></span>
        <span id="omens_dice" class="edit print"></span>
        <span id="powers" class="edit"></span>
        <ul id="equipment" class="edit print"></ul>
        <ul id="scrolls" class="edit print"></ul>
        <div id="weapon" class="edit print"></div>
        <div id="weapon_2" class="edit print"></div>
        <div id="money" class="edit print"></div>
        <div id="armor" class="edit print"></div>
        <span id="description" class="edit print"></span>
        <div id="skills_short" class="edit print"></div>
    </div>
    <div id="character_notes">
        <hr>
        <h2>Notes</h2>
        <div id="skills" class="edit print"></div>
        <h2>Traits</h2>
        <div id="traits" class="edit print"></div>
    </div>
    <footer style="text-align: center; font-size: 65%; opacity: 75%;">
        <hr>
        <pre style="margin: 0px 15px;">
            This character generation for M√ñRK BORG is an independent production by FX Nicolas and is not affiliated with Ockult √ñrtm√§stare Games or Stockholm Kartell. It is published under the M√ñRK BORG Third Party License.
            M√ñRK BORG is copyright Ockult √ñrtm√§stare Games and Stockholm Kartell. <br>
            This tools is based on (forked from) the <b>Waste of Skin</b> generator by <a href="https://github.com/AlessandroMinali/mork-borg-gen" target="_blank">Alessandro Minali</a>, available under the MIT license..
        </pre>
    </footer>
    <script>
        function search() {
            if (window.location.hash) {
                return window.location.hash.slice(1,);
            } else {
                return window.location.search.slice(1,);
            }
        }

        function d(max) {
            return Math.floor(Math.random() * max) + 1;
        }

        function roll(max, n = 1, mod = 0) {
            r = []
            let m;
            for (let i = 0; i < n; ++i) {
                r.push(Math.floor(Math.random() * max) + 1);
            }
            total = (r.reduce((a, b) => a + b, 0) + mod)

            s = "Rolling ";
            if (n > 1) { s += n };
            s += `d${max}`
            if (mod != 0) {
                m = mod > 0 ? `+${mod}` : mod
                s += m
            } else {
                m = ''
            }

            confirm(`${s}\n<${r.join(' + ')}>${m}= ${total}`)
        }

        function save_edits(tag) {
            var editElem = document.getElementsByClassName("edit");
            var edits = [];
            for (var i = 0; i < editElem.length; i++) {
                edits.push(editElem[i].innerHTML);
            }
            localStorage.setItem(tag, edits.join('&666&'));
            show_status("Personnage Sauvegard√©");
        }
        function load_edits(tag) {
            const edits = localStorage.getItem(tag).split('&666&');
            var editElem = document.getElementsByClassName("edit");
            console.log(edits, edits.length, editElem.length);
            for (var i = 0; i < edits.length; i++) {
                editElem[i].innerHTML = edits[i];
            }
            show_status("Personnage Restaur√©");
        }
        function delete_edits(tag) {
            localStorage.removeItem(tag);
            show_status('Personnage Supprim√©');

            window.location.reload();
        }
        function check_edits(tag) {
            return localStorage.getItem(tag) != null;
        }
        function enable_edits() {
            var editElem = document.getElementsByClassName("edit");
            for (var i = 0; i < editElem.length; i++) {
                editElem[i].contentEditable = "true";
            }
        }
        function disable_edits() {
            var editElem = document.getElementsByClassName("edit");
            for (var i = 0; i < editElem.length; i++) {
                editElem[i].contentEditable = "false";
            }
        }

        function show_status(msg) {
            var el = document.getElementById("status");
            el.innerHTML = msg;
            el.style.display = 'inline';
            hide_status();
        }
        var timers = [];
        function hide_status() {
            for (var i = 0; i < timers.length; i++) {
                clearTimeout(timers[i]);
            }
            var el = document.getElementById("status");
            el.style.opacity = 1;
            for (var i = 0; i < 50; i++) {
                timers.push(setTimeout(function () { el.style.opacity -= 0.02; }, i * 60));
            }
        }

        function cyrb128(str) {
            let h1 = 1779033703, h2 = 3144134277,
                h3 = 1013904242, h4 = 2773480762;
            for (let i = 0, k; i < str.length; i++) {
                k = str.charCodeAt(i);
                h1 = h2 ^ Math.imul(h1 ^ k, 597399067);
                h2 = h3 ^ Math.imul(h2 ^ k, 2869860233);
                h3 = h4 ^ Math.imul(h3 ^ k, 951274213);
                h4 = h1 ^ Math.imul(h4 ^ k, 2716044179);
            }
            h1 = Math.imul(h3 ^ (h1 >>> 18), 597399067);
            h2 = Math.imul(h4 ^ (h2 >>> 22), 2869860233);
            h3 = Math.imul(h1 ^ (h3 >>> 17), 951274213);
            h4 = Math.imul(h2 ^ (h4 >>> 19), 2716044179);
            return [(h1 ^ h2 ^ h3 ^ h4) >>> 0, (h2 ^ h1) >>> 0, (h3 ^ h1) >>> 0, (h4 ^ h1) >>> 0];
        }
        function sfc32(a, b, c, d) {
            return function () {
                a >>>= 0; b >>>= 0; c >>>= 0; d >>>= 0;
                var t = (a + b) | 0;
                a = b ^ b >>> 9;
                b = c + (c << 3) | 0;
                c = (c << 21 | c >>> 11);
                d = d + 1 | 0;
                t = t + d | 0;
                c = c + t | 0;
                return (t >>> 0) / 4294967296;
            }
        }
        var _seed;
        var _r;
        function seed() {
            var _s = cyrb128(_seed);
            _r = sfc32(_s[0], _s[1], _s[2], _s[3]);
        }
        function reseed() {
            _seed = Math.random().toString().slice(2,);
            seed();
        }
        function fd(max) {
            return Math.floor(_r() * max) + 1;
        }
        function frandom_item_from(array) {
            return array[Math.floor(_r() * array.length)];
        }

        var total_checks = 0;
        var klass;
        var selected;

        // Class & Class Descriptions


        var classes = ['Racaille', 'D√©serteur √† Crocs', 'Rat des √âgouts', 'Ermite √âsot√©rique', 'Noble Mis√©rable', 'Pr√™tre H√©r√©tique', 'Herboriste Occulte', 'Philosophe D√©sol√©', "Proph√®te d'un Dieu Mort", 'P√¢le', 'M√©tamorphe Maudit', 'Oiseau Chanteur Sacril√®ge'];

        var descriptions = [
            "Origines inconnues.",
            "Vous avez une trentaine d'amies qui ne vous l√¢chent jamais : VOS DENTS. D√©loyal, d√©rang√© ou simplement incontr√¥lable, tout groupe qui ne vous a pas vir√©, vous l'avez quitt√©. Mais votre parlement de dents‚Äî√©normes, saillantes, √©paisses et ac√©r√©es ont toujours √©t√© vos alli√©es.",
            "Une mauvaise √©toile viys a souri √† la naissance. La pauvret√©, le crime et de mauvais parents n'ont pas aid√© non plus. Dans votre communaut√©, un jour de travail honn√™te n'a jamais √©t√© une option. Non pas que vous ayez jamais essay√©, vous √™tes quoi, un pigeon? Une lame de rasoir et une nuit sans lune valent bien une semaine de travail d'idiot.",
            "La pierre de votre caverne ne fait qu'un avec les √©toiles. Silence et perfection. Maintenant, le chaos d'un monde d√©chu perturbe vos rituels et l'enveloppe de la nuit s'assombrit plus que la tristesse de votre caverne. Irritant!",
            "Courb√© par les souvenirs de votre propre gloire perdue, vous ne pourriez jamais vous soumettre √† quelqu'un d'autre. Pas vous, de noble sang! (Non pas que vous vous attendiez √† ce que ces vauriens comprennent la profondeur de votre chagrin.)",
            "Chass√© par les basilics √† deux t√™tes de la Seule Vraie Foi, l'h√©r√©tique peut √™tre trouv√© en train de d√©lirer dans les ruines, arpentant sans fin les routes poussi√©reuses et profanant les cath√©drales la nuit.",
            "N√© du champignon, √©lev√© dans la clairi√®re, veill√© par l'≈ìil de la lune dans une mare noir argent√©.",
            "La route, un labyrinthe d√©raisonnable, chaque temple tremp√© de sang, chaque destination baign√©e de m√©lancolie; vous avez cru un jour que l'analyse froide pourrait dompter le Destin lui-m√™me, maintenant ce r√™ve de raison s'est d√©compos√© en une folie changeante et seul le froid demeure.",
            "Des voix dans votre t√™te vous disent quoi faire ‚Äî du moins, vous le pensez. Vous √™tes le proph√®te d'un dieu assassin√© par le Basilic ELLE au sein des mis√©rables sommets de Bergen Chrypt. Maintenant, personne ne veut entendre les paroles de votre dieu, mais vous, vous le pouvez toujours. Jour et nuit. Comme des fils br√ªlants dans votre cerveau.",
            "Vous r√¥dez aux abords des colonies observant, peut-√™tre jugeant, mais interagissant rarement. Vous √™tes fondamentalement autre et n'appartenez √† nulle part. Vous √©prouvez des acc√®s de folie incoh√©rente et des rages autodestructrices mais, la plupart du temps, vous attendez l'in√©vitable dans une r√©signation solitaire.",
            "Vous auriez d√ª mourir, mais quelque chose a saisi votre √¢me alors qu'elle s'√©coulait dans le fleuve de la Mort et vous a scell√© une fois de plus dans une chair mortelle. Seulement, cette fois, la cage n'est pas √† vous seul ‚Äî dans les courants de l'au-del√†, votre √¢me s'est m√™l√©e √† celle d'une autre cr√©ature mourante, vous laissant divis√© en deux. Maintenant, vous vivez une existence partag√©e, enferm√© dans une lutte √©ternelle entre l'homme et le monstre. Vous auriez d√ª mourir.", "Toujours porteur de sons ind√©sirables, votre vocation de barde vous a laiss√© d√©muni et discr√©dit√©... jusqu'au jour funeste o√π un √™tre de caract√®re impie vous a propos√© l'affaire de votre vie. Votre √¢me a beau crier, votre gorge chante doucement, et votre bourse encore plus doucement. Un petit prix √† payer."];

        var base_skills = [["Agile", "3 meilleurs de 4d6 en Agilit√©"], ["Spirituel", "3 meilleurs de 4d6 en Pr√©sence"], ["Bien nourri", "3 meilleurs de 4d6 en Force"], ["Indomptable", "3 meilleurs de 4d6 en Endurance"]];


        // Fanged Deserter (VALIDATED)

        var fanged_deserter_memory = ["un b√¢timent noirci par le feu √† Sarkash. Votre maison?", "un navire d√©labr√© et pourri roulant sans fin sur une mer grise.", "un bordel √† Schleswig. Un environnement plut√¥t amical.", "dormir avec des chiens dans le coin d'une auberge, attendant que quelqu'un revienne.", "suivre une arm√©e dans l'est du W√§stland.", "t√©ter une louve dans la nature de Bergen Chrypt."];

        var fanged_deserter_features = [
            ["Masque de Monstre Froiss√©", "Inspire une peur primitive aux cr√©atures moindres comme les gobelins, les gnomes et les enfants. Tant qu'il est port√©, ils v√©rifient leur Moral √† chaque round."],
            ["Le Cimeterre Brun de Galgenbeck", "Une √©p√©e puante que vous avez tir√©e d'un foss√© √† merde militaire. d6 d√©g√¢ts Attaque DR10 et D√©fense pendant que vous la maniez. 1 chance sur 6 qu'un ennemi bless√© soit frapp√© d'une septic√©mie puissante, mourant en 10 minutes."],
            ["Dents de Sorcier", "Quatre dents √©tranges cliquettent dans une pochette noircie. Avant la bataille, lancez un d6 pour chacune. Pour chaque 6, une de vos attaques inflige le maximum de d√©g√¢ts."],
            ["Fronde du Vieux Sig√ªrd", "Sig√ªrd √©tait l'homme le plus fort dont vous ayez jamais rong√© la gorge. Tiss√©e √† partir de ses longs cheveux gris, cette fronde ne vous a jamais manqu√©. 2d4 d√©g√¢ts, n√©cessite des pierres de la taille d'un poing qui, peut-√™tre malheureusement, sont partout."],
            ["Ancien Chien de Sang", "Asthmatique, d√©lirant et √† bout de souffle, cette cr√©ature rid√©e a toujours un nez superbe et peut renifler des tr√©sors dans les d√©bris les plus d√©go√ªtants. Attaque avec DR10 (morsure d6 d√©g√¢ts). D√©fend avec DR12, 10 PV. Devient fr√©n√©tique autour des gobelins et des berserkers."],
            ["Le Fer √† Cheval de la Mort", "Il a l'air normal mais depuis que vous l'avez trouv√© dans une crypte obscure, vous √™tes convaincu que ce fer √† cheval provient du cheval de la Mort lui-m√™me. Dans vos mains, il frappe avec DR10, d4 d√©g√¢ts. 1 chance sur 6 que le fer √† cheval √©crase le cr√¢ne, tuant instantan√©ment les cr√©atures de petite √† moyenne taille. Le fer √† cheval revient dans votre main comme un boomerang."]
        ];

        var fanged_deserter_abilites = [
            ["B√¢ti Comme un Taureau", "3d6+1 Force"],
            ["Pas une Lumi√®re", "Les tests d'AGILIT√â normaux sont DR14 au lieu de DR12, √† l'exception de la D√©fense."],
            ["Analphab√®te", "Vous √™tes incapable de comprendre les parchemins. Si vous commencez avec un, relancez, mangez-le ou utilisez-le comme papier toilette."],
            ["Morsure", "DR10 pour Attaquer, d6 d√©g√¢ts. Vous devez √™tre proche de votre cible. 1-2 sur d6 chance que l'ennemi obtienne une attaque gratuite."]
        ];

        // Gutterborn Scum (VALIDATED)

        var gutterborn_memory = ["vous avez √©t√© jet√© sur une charrette √† merde en mouvement toujours dans votre coiffe de naissance.", "votre m√®re pendait √† un arbre √† l'ext√©rieur de Galgenbeck, vous √™tes tomb√© du cadavre", "vous avez √©t√© √©lev√© par des rats dans les goutti√®res de Grift.", "vous avez √©t√© bott√© et battu sous la table d'un boulanger √† Schleswig.", "vous vous √™tes √©chapp√© de l'orphelinat Tvelandien.", "vous avez √©t√© √©duqu√© par des hors-la-loi dans une masure au sud d'Alli√°ns."];

        var gutterborn_abilities = [
            ["Petit", "3d6-2 Force"],
            ["Furtif", "Tous les tests de PR√âSENCE et d'AGILIT√â voient leur DR r√©duit de 2 (les tests normaux sont DR10 au lieu de DR12)."],
            ["Wunderkind (Enfant Prodige)", "La premi√®re fois que la Racaille s'am√©liore, une autre sp√©cialit√© est tir√©e. √Ä partir de la deuxi√®me fois que la Racaille s'am√©liore, il est possible de relancer ces deux sp√©cialit√©s ou seulement une."]
        ];

        var gutterborn_features = [
            ["Coup de Jarnac du L√¢che", "Lorsque vous attaquez par surprise, testez AGILIT√â DR10. En cas de succ√®s, vous frappez automatiquement une fois avec une arme l√©g√®re √† une main, infligeant des d√©g√¢ts normaux +3."],
            ["Doigts Crades", "Vos petits doigts de serpent se glissent dans les poches et ouvrent les serrures avec un test d'AGILIT√â DR8. Vous commencez √©galement avec des crochets de serrurier!"],
            ["Cracheur de Glu Abominable", "Votre flegme est visqueux, grumeleux et ignoble et d'une pr√©cision balistique √† courte port√©e. Vous pouvez cracher d2 fois pendant un combat. Lancez un test de PR√âSENCE DR8 pour la pr√©cision. Les cibles sont aveugl√©es, b√¢illonnant et vomissant pendant d4 rounds. Quiconque en est t√©moin‚Äîami et ennemi‚Äîdoit faire un test de ENDURANCE pour ne pas vomir √©galement. Les PJ testent DR10 et les ennemis DR12."],
            ["Discr√©tion d'√âvasion", "Chaque fois que vous utilisez un Pr√©sage, il y a 50% de chances qu'il ne soit pas d√©pens√©."],
            ["Discr√©tion Excr√©mentielle", "Vous avez une capacit√© √©tonnante, presque surnaturelle, √† vous cacher dans la boue, les d√©bris et la crasse. Lorsqu'ils sont cach√©s dans ces conditions, un test de PR√âSENCE DR16 est requis pour vous remarquer."],
            ["Esquiver la Mort", "Vous √™tes si d√©sagr√©able, insignifiant, d√©go√ªtant et ignoble que m√™me la Mort pr√©f√®re vous √©viter si elle le peut. √Ä la Mort, s'il y a la moindre possibilit√© que vous ayez surv√©cu, il y a 50% de chances que vous l'ayez fait. Si cela r√©ussit, apr√®s 10 rounds, vous r√©apparaissez avec d4 PV et une explication improbable de votre √©vasion."]
        ];

        // Esoteric Hermit (VALIDATED)

        var esoteric_hermit_memory = ["vous √™tes r√©veill√© dans un cercle rituel sous le pont nord de Grift.", "erriez, sans m√©moire, de l'embouchure d'une caverne aux falaises de Terion.", "√©tiez le seul enfant survivant d'un incident dans la Vall√©e des Morts-Vivants Malheureux.", "mourriez de la peste dans une masure de Bergen Chrypt, et avez touch√© quelque chose de l'ext√©rieur.", "√©tiez un individu moyen jusqu'√† ce que vous rencontriez quelque chose dans une clairi√®re sombre √† Sarkash.", "avez √©t√© √©lev√© sur une √Æle solitaire du lac Onda. Personne d'autre n'a jamais entendu parler de cette √Æle et vous ne pouvez pas y retourner."];

        var esoteric_hermit_abilities = [
            ["Sage", "3d6+2 Pr√©sence."],
            ["Fragile", "3d6-2 Force."]
        ];
        var esoteric_hermit_features = [
            ["Ma√Ætre du Destin", "√Ä quoi servent les cartes lorsque la substance de la causalit√© elle-m√™me vous est ouverte? Vous connaissez le bon chemin avec un test de PR√âSENCE DR8."],
            ["Livre du Sang Bouillant", "Vous pouvez ouvrir et lire ce livre une fois par jour. Votre ennemi doit faire un test DR12 pour emp√™cher cela. S'il √©choue, d2 tueurs Berserker (page 59) apparaissent des profondeurs d'une dimension oubli√©e de sang. Lancez un d6. Sur un 1-4, ces cr√©atures se battent √† vos c√¥t√©s. Sur un 5-6, elles se retournent contre vous, tentant de vous tuer et de d√©truire le livre. Apr√®s la bataille, elles retournent √† leur emprisonnement."],
            ["Orateur de V√©rit√©s", "Deux fois par jour, utilisez votre sagesse, vos connaissances, vos conseils et votre calme int√©rieur pour apporter de la clart√© √† une cr√©ature de votre choix. Le DR du prochain test qu'elle entreprend est abaiss√© de 4."],
            ["Initi√© du Coll√®ge Invisible", "Une fois par jour, vous pouvez invoquer d2 parchemins, dont le Pouvoir ne peut √™tre utilis√© qu'une seule fois. Lancez un d4, sur un 1-2 les parchemins sont sacr√©s, sur un 3-4, impurs. Si les parchemins ne sont pas utilis√©s avant le lever du soleil, ils se transforment en cendres."],
            ["Barde de l'Immortel", "Vous apprenez vos m√©lodies dans l'Autre-Monde. La musique de votre Harpe donne +d4 sur les jets de r√©action."],
            ["Faucon comme Arme", "Votre faucon astucieux presque intelligent n'est fid√®le qu'√† vous. M√™me sans langage partag√©, vous comprenez ses cris alors qu'il surveille, explore et plonge pour attaquer les ennemis. (8 PV Attaques/D√©fense DR10 griffes/morsure d4 d√©g√¢ts)"]
        ];

        // Wretched Royalty (VALIDATED)

        var wretched_royalty_memory = ["votre palais du W√§stland a √©t√© r√©duit en ruines.", "votre royaume caravane de Tveland est tomb√© dans la mis√®re.", "le fr√®re du roi Fathmu IX, Zigmund, votre p√®re, a √©t√© assassin√©.", "l'empire du sud de S√ºdglans a sombr√© dans la mer.", "Anthelia a exig√© un cadeau de sang noble.", "deux jeunes princes ont √©t√© enlev√©s √† l'ouest de Bergen Chrypt et ont disparu dans la crevasse noire des pentes orientales."];

        var wretched_royalty_abilities = [
            ["Douloureusement moyen", "Aucun ajustement d'attribut."]
        ];

        var wretched_royalty_features = [
            ["La Lame de vos Anc√™tres", "Cette magnifique √©p√©e parlante clairement magique est pr√©cieuse, peu fiable et vous m√©prise secr√®tement. Elle se moque de vos √©checs et, si elle est continuellement d√©√ßue, d√©veloppe une chance sur 6 d'attaquer 'accidentellement' vous ou vos compagnons. Inflige d6+1 d√©g√¢ts. Attaque/D√©fense DR10."],
            ["'Poltron' le Bouffon de Cour", "Bien que pratiquement inutile, personnellement irritant et une source de drainage √©motionnel, les cabrioles de Poltron font en r√©alit√© perdre leur concentration aux ennemis en combat. Pendant les deux premiers rounds, vous et vos alli√©s obtenez +2 en Attaque/D√©fense."],
            ["Barbarister le Cheval Incroyable", "Barbarister est magique, intelligent, arrogant et vain. Il peut aussi parler. Si vous pouvez le persuader de s'en soucier, Barbarister ajoute occasionnellement +2 aux tests de PR√âSENCE impliquant la logique et l'intellect. Le cheval est peut-√™tre plus intelligent que vous et en est tout √† fait conscient."],
            ["Hamfund l'√âcuyer", "Ce serviteur intens√©ment l√¢che n'agit que comme gardien du fourreau de l'√©p√©e maudite Eurekia. Une fois par combat, si Ham peut √™tre trouv√©, Eurekia peut √™tre tir√©e. L'√©p√©e fait 2d6 d√©g√¢ts, et pour chaque coup d'Eurekia, lancez un d6. Sur un 1, l'√©cuyer est tu√© et Eurekia dispara√Æt pour toujours."],
            ["Le Cadeau de Peau de Serpent", "Une bo√Æte en bois de santal co√ªteuse li√©e en peau de serpent. Elle contient un poignard apparemment ordinaire, envelopp√© dans de la soie. Le poignard fait d4 d√©g√¢ts mais sur un 1, la cible meurt imm√©diatement d'un poison mortel pleurant de la lame."],
            ["Corne des Seigneurs de Schleswig!", "Une fois par jour, faites retentir cette vieille trompette bossel√©e et testez PR√âSENCE DR12. Une cr√©ature peut faire de son prochain test non-combat un succ√®s automatique."]
        ];
        // Apparently not in the base ruleset and seems interesting.
        var wretched_royalty_features_2 = [
            ["√âcrit de Compagnon de Lit", "Avec ce parchemin, vous √™tes sous immunit√© aristocratique et ne pouvez √™tre pers√©cut√© pour aucun crime contre ceux qui vous sont inf√©rieurs. Seuls les nobles et autres aristocrates respecteront ce d√©cret sauf si vous r√©ussissez un test de PR√âSENCE DR14."],
            ["SANG Bleu", "Des g√©n√©rations de complots men√©s avec du poison et des lames de mis√©reux ont rendu votre sang particuli√®rement r√©sistant √† l'infection. Vous ne subissez aucune perte quotidienne de PV en cas d'infection."],
            ["Buste d'un Fou", "La plupart de vos parents morts r√™vent dans le mausol√©e familial, mais l'esprit de ce grand-grand-oncle a d√©cid√© √† la place de hanter un buste en pierre antique. Nourrissez-le d'une journ√©e de nourriture et ses yeux brilleront d'une lumi√®re fantomatique bleu p√¢le pendant d4 heures, illuminant la zone. La lumi√®re r√©v√®le √©galement les choses invisibles."],
            ["Bijou de Famille", "Autrefois la couronne de la collection de votre famille, cette pierre pr√©cieuse de saphir vous rend une cible all√©chante. Lorsqu'elle est tenue en l'air, toutes les cr√©atures ennemies ayant un penchant pour les richesses vous attaqueront avant toutes les autres."],
            ["Collier en Branchies de Verre", "Ce magnifique collier en argent embo√Æte six perles iris√©es. En avaler une vous permet de respirer sous l'eau jusqu'√† ce que la perle passe. R√©utilisable."],
            ["Sceau d'Opulence", "Les dettes et les indettes de la noblesse ne sont pas vite oubli√©es. Montrez ce sceau de famille antique √† un marchand, et il y a 50% de chances que leurs prix soient r√©duits de moiti√© pour vous et votre groupe. Sinon, les prix sont doubl√©s."]
        ];


        // Heretical Priest (VALIDATED)

        var heretical_priest_memory = ["de Galgenbeck, pr√®s de la cath√©drale des Basilics √† Deux T√™tes.", "d'un culte massacr√© d'Alli√°ns, seul survivant.", "des cryptes de Grift.", "des ruines de temple dans la Vall√©e des Morts-Vivants Malheureux.", "de l'un des nombreux tunnels de voleurs de Graven-Tosk.", "d'une √©glise secr√®te de Bergen Chrypt."];

        var heretical_priest_abilities = [
            ["Perspicace", "3d6+2 Pr√©sence"],
            ["Fr√™le", "3d6-2 Force"],
            ["Pr√™trise", "Peut utiliser des Pouvoirs en portant une armure moyenne"]
        ];
        var heretical_priest_features = [
            ["Crosse de Berger Sacr√©", "Sa t√™te, un crochet en os humain inscrit d'anti-pri√®res qui se chevauchent. Cette crosse s'accroche √† travers d'autres mondes. Le b√¢ton fait 2d4 d√©g√¢ts sauf aux humains sans foi."],
            ["Mitre Vol√©e", "En portant ce chapeau sacr√©, le corps ignoble du pr√™tre s'estompe, devenant difficile √† toucher en combat (D√©fense DR10). Si tir√© sur les oreilles en dehors de la bataille, le pr√™tre devient presque invisible, testant la discr√©tion contre DR8."],
            ["Liste des P√©ch√©s", "Un document long et pr√©cis recoup√© avec la r√©alit√© pour d√©couvrir les malfaiteurs invisibles. PR√âSENCE DR10 r√©ussie: Une lumi√®re √©trange entoure les cr√©atures mal√©fiques. Le propri√©taire de la liste d√©fend avec +2 contre tout √™tre d√©couvert de cette mani√®re."],
            ["La Bible Blasphematoire de Nechrubel", "Si intens√©ment blasph√©matoire que m√™me les Pr√™tres eux-m√™mes ne peuvent la parcourir qu'une fois par jour. Lors de la lecture, lancez un d√©. R√©sultat pair: Pour le reste de la journ√©e, les PJ r√©cup√®rent d4 PV apr√®s seulement cinq minutes de repos. R√©sultat impair: Le pr√™tre est en proie √† des hallucinations d√©moniaques. Le MJ peut inventer d3 choses que seul le Pr√™tre peut voir et les d√©crire au joueur comme si elles √©taient vraies. Cet effet prend fin au lever du soleil."],
            ["Pierres Prises au Temple Perdu des Thel-Emas", "Jetez les pierres au sol. Leur motif r√©v√®le si un danger se cache dans une pi√®ce adjacente. Les pierres peuvent mentir. Le pr√™tre teste PR√âSENCE DR10 pour voir si elles sont vraies mais apr√®s avoir √©chou√©, il ne peut plus tester avant le coucher du soleil."],
            ["( ç…πou∆É …æ«ùsns) Crucifix", "Le crucifix peut √™tre utilis√© dans des rencontres avec les morts-vivants ainsi qu'avec des trolls et des gobelins moindres. V√©rifiez le moral (ajoutez ou soustrayez le modificateur de PR√âSENCE du pr√™tre) pour voir si les cr√©atures s'inclinent et s'√©loignent gentiment."]
        ];

        // Occult Herbmaster (VALIDATED)

        var occult_herbmaster_memory = ["l'isolement calme dans l'obscurit√© de Sarkash.", "l'isolement calme dans l'obscurit√© de Sarkash.", "l'isolement calme dans l'obscurit√© de Sarkash.", "les march√©s nocturnes ill√©gaux de Schleswig", "l'√Æle h√©r√©tique de Cr√´lut, deux milles marins √† l'est de Grift.", "les vieilles ruines gel√©es non loin d'Alli√°ns.", "une petite chaumi√®re de sorci√®re √† Galgenbeck.", "les ruines du manoir du Roi des Ombres, √©paisses de souvenirs de champignons et de fum√©e."];

        var occult_herbmaster_abilities = [
            ["Dur comme du Bois", "3d6+2 Endurance."],
            ["Faible en Prot√©ines", "3d6-2 Force"],
            ["Laboratoire Portable", "Vous transportez un laboratoire portable et recherchez continuellement des ingr√©dients fr√©quemment d√©pens√©s. Quotidiennement, vous avez le mat√©riel pour cr√©er deux d√©coctions d√©termin√©es au hasard et pouvez brasser un total de d4 doses. Si elles ne sont pas utilis√©es, elles perdent de leur vitalit√© apr√®s 24 heures."],
            ["Liste des D√©coctions", "<ol><li><b>Poison Rouge</b> ENDURANCE DR12 ou -d10 PV.</li><li><b>Vapeur d'Ezumiel</b> R√©ussissez un test DR14 ou des hallucinations s√©v√®res pendant d4 heures.</li><li><b>Rago√ªt de Grenouille du Sud</b> Vomissements pendant d4 heures, r√©ussissez un test DR14 ou vous ne pouvez rien faire d'autre.</li><li><b>√âlixir Vitalis</b> Soigne d6 PV et arr√™te l'infection. Peut cr√©er une accoutumance.</li><li><b>Soupe de Chouette-Araign√©e</b> Voir dans l'obscurit√©, grimper sur les murs pendant 30 minutes.</li><li><b>Philtre de Fernor</b> Huile translucide, doit √™tre tamponn√©e directement dans l'≈ìil. Soigne l'infection et donne +2 aux tests de PR√âSENCE pendant d4 heures.</li><li><b>Tabac √† Priser √ânervant d'Hyphos</b> Berserk! Deux attaques par round mais d√©fendez avec DR14. Dure un combat. Doit √™tre sniff√©, provoque des √©ternuements.</li><li><b>Poison Noir</b> ENDURANCE DR14 ou -d6 PV et aveugl√© pendant une heure.</li></ol>"]
        ];

        // Pale One (VALIDATED)

        var pale_one_name_1 = ["Abhorr√©", "Sous", "Rev√™tu", "Errant", "Familier", "G√©ant", "Cach√©", "Lyrique", "Maniaque", "Sans Nom", "Obsc√®ne", "Douloureux", "Repos√©", "Squelettique", "Fort", "Soudain", "Inconscient", "Ignorant", "Vitriolique", "Vers l'Ouest"];
        var pale_one_name_2 = ["Attaque", "Attire", "Attend", "Noircit", "Carillonne", "Couvre", "Danse", "Nie", "Descend", "Noyade", "√âcho", "Offre", "Tremble", "Ploie", "Refl√®te", "Revient", "Scelle", "Se Soumet", "Tisse", "Se Fl√©trit"];
        var pale_one_name_3 = ["l'√âther", "le Damn√©", "la D√©composition", "la Poussi√®re", "l'≈íil", "le Visage", "la Chair", "les Mouches", "la Fleur", "les Couteaux", "la Lune", "la Montagne", "la Peste", "la Pri√®re", "les Rats", "le Saint", "la Mer", "l'√âtranger", "la V√©rit√©", "le Vide"];

        var pale_one_memory = ["avez √©t√© attrap√© par des p√™cheurs sur la mer Sans Fin.", "avez √©t√© accidentellement invoqu√© par des cultistes √† Graven-Tosk.", "avez √©t√© vomi par une b√™te r√©pugnante √† Bergen Chrypt.", "√™tes tomb√© du Ciel pr√®s d'Alli√°ns.", "avez √©clos d'un ≈ìuf de Sorci√®re des Marais pondu dans un marais du W√§stland.", "avez ramp√© hors d'une fissure dans le sol pr√®s de Grift."];

        var pale_one_abilities = [
            ['Alien', '3d6+1 Agilit√© et Pr√©sence'],
            ['Os Creux et Fragiles', '3d6-2 Endurance.'],
            ['Philologue', "Vous √™tes lettr√©, mais seulement dans les langues mortes et ne pouvez pas utiliser de parchemins. Cependant, vous pouvez utiliser intuitivement un Pouvoir tir√© au hasard (d6) quotidiennement, √† l'aube ou au cr√©puscule.<ol><li><b>Les √âtoiles Avaient Raison</b>: Lancez d4+2 pour les pr√©sages. Dites quelque chose de cryptique lorsque vous en utilisez un.</li><li><b>Ailes Membraneuses</b>: Vous pouvez voler sur de courtes distances mais ne pouvez pas porter d'armure. Les oiseaux vous d√©testent.</li><li><b>Argile Peu Commune</b>: Vous pouvez tirer votre nourriture du sol mais la nourriture normale vous rend malade. Vous sentez les champignons.</li><li><b>Mana de Quelque Part</b>: D√©pensez une utilisation de vos Pouvoirs pour cr√©er de la nourriture √©trangement d√©licieuse (mais d√©concertante) pour d6 personnes.</li><li><b>Membres Digitigrades</b>: Vous √©chappez √† toute entrave et vous vous faufilez dans de petits espaces. -4 DR aux tests impliquant la flexibilit√©.</li><li><b>Trop d'Yeux</b>: Juste beaucoup trop. Vous ne pouvez pas √™tre attaqu√© par surprise. Vous pouvez d√©penser une utilisation de vos Pouvoirs pour laisser un ≈ìil derri√®re vous et espionner √† distance (vous subissez d2 d√©g√¢ts si l'≈ìil est √©cras√©)</li></ol>"]
        ];

        // Songbird Sacrilege (VALIDATED)

        var songbird_memory = ["dans des latrines juste √† l'ext√©rieur de Grift.", "en se cachant des gardes √† Galgenbeck.", "dans la chambre d'un noble de W√§stland.", "en r√™vant dans un foss√© oubli√©.", "dans une cellule de prison de Schleswig.", "√† quelques minutes de mourir de froid en route vers Alli√°ns."];

        var songbird_abilities = [
            ['Personnalit√© Amplifi√©e', '3d6+2 Pr√©sence.'],
            ['Vie Dure', '3d6-2 Endurance.'],
            ['Personne √† Personne', 'Vous portez une aura de charme surnaturel partout o√π vous allez, capable de d√©stabiliser les ennemis et de calmer les amis, d√©pensez une utilisation de vos Pouvoirs quotidiens pour ajouter ou soustraire d6 √† tout test de Moral.']
        ];
        var songbird_features = [
            ["Cornemuse du Destin", "Cet amalgame de sacs intestinaux velus et cousus pr√©sente des tuyaux en os extrud√©s sur lesquels vous devez souffler. En le faisant, les auditeurs de votre choix sont remplis d'une faim surnaturelle, comme s'ils n'avaient pas mang√© depuis une semaine."],
            ["Vielle-√†-R√¢le", "Tourner la manivelle de cette chose √† cordes faite de bois et de gore √©met un son lancinant qui blesse les oreilles des cr√©atures qui √©chouent un test de PR√âSENCE contre DR12. Le premier round jou√©, elle inflige d2 d√©g√¢ts, augmentant √† d4 et au-del√† lors des rounds suivants."],
            ["Carcasse Spinale", "En battant ce tambour fait d'une carapace de d√©moniaque, lancez 2d6:<ul><li>6+ Tout le monde sauf vous teste AGILIT√â contre DR14 ou tombe √† terre.</li><li>11 Choisissez d4 cr√©atures qui peuvent entendre votre tambourinage. Leurs √©pines se brisent comme des brindilles. Vous ne pouvez plus utiliser le tambour aujourd'hui.</li><li>12 Vos oreilles n'arr√™tent pas de sonner; vous √™tes sourd pour les prochaines 24 heures.</li></ul> Sert √©galement de bouclier."],
            ["L'Aquif√®re du Diable", "La corne d'une cr√©ature beelz√©bubonique des profondeurs de la Mer Sans Fin. Quand on souffle dedans, les poumons de vos ennemis se remplissent d'eau de mer, s'ils √©chouent un test de ENDURANCE contre DR14; un round doit √™tre pass√© √† l'expulser avant de faire quoi que ce soit d'autre."],
            ["Orgue Bouche-√†-Bouche", "Jouez de cet harmonica en os pour qu'un auditeur bris√© r√©cup√®re instantan√©ment d4 PV. Il ne peut pas parler tant que ses PV ne sont pas enti√®rement r√©cup√©r√©s."],
            ["Luth du Brute Aigu√´", "Lorsque l'on gratte cet instrument en forme de hache (d8 d√©g√¢ts), le son fait que le score de FORCE et de PR√âSENCE de quiconque l'entend √©change les scores pour les d6 prochains jours. Une √©coute r√©p√©t√©e n'a aucun effet."]
        ];


        // Cursed Skinwalker (VALIDATED)

        var cursed_skinwalker_memory = ["serrant le corps d'un amant.", "par une fl√®che dans le cerveau.", "quelques minutes apr√®s la naissance.", "par la main d'un ami.", "assassin√© dans votre lit.", "√† l'arri√®re d'une charrette de peste."];

        var cursed_skinwalker_abilities = [
            ['Esprit Affaibli', '3d6-2 Pr√©sence.'],
            ['Instincts Bestiaux', '3d6+1 Force et Endurance.'],
            ['M√©tamorphe', "Vous pouvez c√©der aux avances de votre autre antagoniste en remodelant votre anatomie √† son image. D√©placer vos os n√©cessite un seul round douloureux. L'armure et les armes sont probablement inutilisables sous votre nouvelle forme."]
        ];
        var cursed_skinwalker_features = [
            ["Rat Ensorcel√© par le Meurtre", "<ul><li>Minuscule: Les tests d'AGILIT√â, y compris la D√©fense, sont DR8.</li><li>Votre morsure (d4) porte la maladie‚ÄîTest de PR√âSENCE DR14 ou ils attaquent leur alli√© le plus proche jusqu'√† ce que l'un des deux meure.</li></ul>"],
            ["Loup √âcorch√© et Poisseux", "<ul><li>F√©roce, les Attaques sont DR10.</li><li>Vos crocs critiquent en plus sur un 19 naturel, d√©clenchant un test de Moral.</li><li>Glissant de sang, -d2 d√©g√¢ts entrants.</li></ul>"],
            ["Corbeau √† Cr√¢ne d'Os", "<ul><li>Rapide et volant, la D√©fense est DR10. Faites deux attaques de griffes (d4) par round.</li><li>Votre cuir chevelu osseux agit comme une arme et un bouclier: -1 d√©g√¢t et vous pouvez choisir d'ignorer tous les d√©g√¢ts d'une attaque. Le cr√¢ne gu√©rit en d6 jours.</li></ul>"],
            ["Ours de Bergen Chrypt", "<ul><li>Massif et imposant: les tests de FORCE, de ENDURANCE et les Attaques sont DR10. La D√©fense est DR14.</li><li>Fourrure √©paisse: -d4 d√©g√¢ts entrants.</li><li>Vos griffes et morsures infligent d8 d√©g√¢ts.</li></ul>"],
            ["L√©zard de Vie-et-Mort", "<ul><li>R√©g√©n√®re d4 PV par round.</li><li>Morsure (d6) ou crache de l'acide (d4, 1 chance sur 4 que l'armure baisse d'un niveau).</li><li>Peau √©cailleuse, -d2 d√©g√¢ts entrants.</li></ul>"],
            ["Singe Proph√®te du Malheur", "<ul><li>Dextre: Les tests d'AGILIT√â, y compris la D√©fense, sont DR10.</li><li>Les armures l√©g√®res et les armes restent utilisables.</li><li>Votre troisi√®me ≈ìil vous permet de lire des parchemins impurs √† DR10</li></ul>"]
        ];

        // Dead Gods Prophet (VALIDATED)

        var dead_gods_prophet_memory_1 = ["Acrophoe", "Elioch", "Ekk", "Ghzat", "Gnost", "Kvera", "Malais", "Varkka", "√Ñ√§el", "√ñde"];
        var dead_gods_prophet_memory_2 = ["Phare", "Porteur", "√âpouse", "Enfant", "H√©raut", "Roi", "Dame", "Prince", "Reine", "Chant"];
        var dead_gods_prophet_memory_3 = ["de Sang", "de la Mort", "de la D√©composition", "des Mouches", "de l'Impuissance", "de la Panique", "de la Pourriture", "de la Rouille", "du Malaise", "de la Chair"];

        var dead_gods_prophet_abilities = [
            ['Obs√©d√©', '3D6+2 Pr√©sence.'],
            ['Faible par N√©gligence', '3d6-2 Endurance.'],
            ['Fondamentaliste', "Vous √™tes lettr√© et pouvez utiliser des parchemins mais devez r√©ussir un test de PR√âSENCE DR12 ou tenter imm√©diatement de d√©truire les mots des faux dieux."]
        ];

        var dead_gods_prophet_features = [
            ["Le Sang Parle", "Flagellant, vous vous battez r√©guli√®rement pour r√©veiller votre dieu perdu. Si vous vous infligez d3 d√©g√¢ts avant le combat, gagnez +2 aux jets √©gaux aux PV perdus."],
            ["Seigneur de Rien", "Vous portez un arrangement bizarre de v√™tements et de chiffons comme une parodie de roi ou de reine. Pourtant, vous gagnez +2 aux jets pour impressionner ceux qui sont facilement dup√©s."],
            ["Odeur de D√©composition", "Non seulement votre dieu est mort, mais son odeur de d√©composition vous impr√®gne. Bonus de +2 au jet de D√©fense en raison de la puanteur naus√©abonde."],
            ["Bavardage Sophiste Incoh√©rent", "Concentrez-vous pour babiller une litanie d√©concertante dont les auditeurs doivent r√©ussir un test de PR√âSENCE DR10 ou perdre leur prochaine action."],
            ["Ichor de Pourriture", "Les fluides naus√©abonds de votre dieu en putr√©faction suintent de vos mains‚Äîun stigmate noir. En tant qu'Attaque DR12, vous pouvez essuyer vos mains sur la peau nue d'un assaillant, qui doit r√©ussir un test de ENDURANCE DR12 ou sombrer dans des spasmes √©cumeux pendant deux tours."],
            ["Mon Corps, Un Vaisseau", "Votre dieu est peut-√™tre mort, mais qu'est-ce que la mort pour un dieu? Une fois par jour, vous pouvez permettre au fant√¥me de votre dieu d'entrer dans votre chair et de r√©v√©ler une v√©rit√©‚Äîune question par oui/non au MJ qui doit √™tre r√©pondue sinc√®rement. Le dieu part vous laissant affaibli et fragile."],
            ["Dans la Mort Je Vis", "Lorsque vous mourez, faites un test de PR√âSENCE DR14. Si vous r√©ussissez, votre dieu refuse votre passage dans l'au-del√† et vous r√©cup√©rez avec 1PV. Sinon, votre corps est consum√© par des flammes sacr√©es."],
            ["Yeux de Feu Sacr√©", "Vos pupilles br√ªlent de l'√¢me de votre seigneur. Une fois par combat, vous pouvez attaquer (DR10) en jaillissant du feu de vos yeux (d6 d√©g√¢ts); vous aveuglant pour la dur√©e du combat."]
        ];

        // Forlorn Philosopher (VALIDATED)

        var forlorn_philosopher_memory_1 = ["Votre m√®re alternait louanges et humiliation menant √† une image de soi grandiose et √† une haine de soi br√ªlante.", "Vous vouliez √™tre un guerrier ou un grand chef mais vous ne pouvez pas! Arr√™tez! DE PENSER! ARR√äTEZ LES PENS√âES!!", "La stupidit√© ambiante et les lumi√®res vives provoquent l'INFLAMMATION de vos tissus mentaux hypersensibles.", "Vous pourriez sauver ce monde condamn√©! Si seulement les masses non lav√©es comprenaient votre G√âNIE!", "Vous avez √©t√© victime du virus mental de ¬´l'amour¬ª, puis l'objet de votre affection est parti vivre dans un trou.", "Vous avez encod√© votre philosophie omnivalente dans un seul tome pour la conserver en lieu s√ªr et l'avez vu br√ªler en fuyant. Tout est perdu.", "Les cultistes Udok ont captur√© votre famille et vous ont forc√© √† d√©battre avec eux pendant qu'ils d√©voraient vos parents vivants.", "Vous √©tiez le philosophe le plus v√©n√©r√© de S√ºdglans‚Äîqui a sombr√© dans la mer et maintenant tout le monde se moque de vous sans piti√©."];

        var forlorn_philosopher_memory_2 = ["√âlev√© par des Th√©istes fanatiques dans un temple sous les ponts de Grift.", "N√© d'une m√®re sans nom dans un sanatorium de Galgenbeck.", "√âlev√© par des rustres ignorants et analphab√®tes dans une for√™t paisible du W√§stland.", "√âlev√© par des cultistes honteux de la vie du d√©sert gel√© de Kerg√ºs qui pensent que personne ne devrait na√Ætre dans ce monde mourant.", "Abandonn√© dans les catacombes de Bergen Chrypt.", "√âduqu√© par les damn√©s au milieu des fosses de boue de la Vall√©e des Morts-Vivants Malheureux."];

        var forlorn_philosopher_abilities = [
            ['Concentration Mentale', '3d6+2 Pr√©sence.'],
            ['Trop de Lecture!', '3d6-2 Force'],
            ['Inquisition Impitoyable', "Testez PR√âSENCE DR14 pour d√©chiffrer les mensonges et les illusions des autres. Assez de ces MENSONGES!"]
        ];
        var forlorn_philosopher_features = [
            ['√âpines de la Compr√©hension', "Lorsqu'elles sont port√©es, des √©pines percent votre chair (d2 d√©g√¢ts) et vous Percez Tout (-4DR √† votre prochain test et ignorez les deux prochaines attaques au toucher alors que vous vous faufilez). Pour retrouver l'effet, vous devez vous couronner √† nouveau. Les d√©g√¢ts augmentent d'un pas √† chaque fois (d2 √† d4 √† d6 etc), jusqu'√† apr√®s une nuit de repos"],
            ['Hibou H√©g√©lien', 'Cette b√™te philosophique est un assistant amer, r√©ticent et hypersensible‚Äîpersuad√© avec un test de PR√âSENCE DR12. Apr√®s deux actes d\'aide, il vous consid√®re avec un m√©pris muet. Il peut aller chercher de petits objets, attaquer des ennemis et trouver des pi√®ges. La nuit, le hibou d√©livre dans les r√™ves la compr√©hension de ce que vous auriez d√ª faire aujourd\'hui.<br>(Trop rapide √† toucher. Griffes/morsure d4. Les attaques sont DR8).'],
            ['Prisme d\'Ambig√ºit√©', 'Une source de lumi√®re externe et un test de PR√âSENCE DR10 sont n√©cessaires pour activer le prisme. Sa lumi√®re peut briller sur jusqu\'√† deux cr√©atures soignant d6 PV. Pendant la prochaine heure, l\'une d\'elles abaisse tous les DR des tests de -2. Si le test est rat√©, elle subit d4 d√©g√¢ts et son armure ou une arme est d√©truite. Vous pouvez utiliser le prisme deux fois par jour.'],
            ['Fl√ªte de Tosk', "Une fois par combat, lorsqu'une cr√©ature meurt, vous pouvez jouer la Fugue √âcho de cette fl√ªte en os. Cela inflige un ¬´√©cho¬ª des d√©g√¢ts mortels √† un ennemi al√©atoire dans les environs."],
            ['√âcharpe du Stylite', "L'ESPRIT contr√¥le le corps! Rien n'est bon ou mauvais, mais penser le rend tel, y compris les calories et les prot√©ines. Porter cette ceinture signifie que vous ne ressentez pas la faim et n'avez besoin que de boire de l'eau pour r√©cup√©rer des PV au repos. La porter pendant plus de d4 jours vous fait vous effondrer. Il faut une journ√©e pour retrouver son pouvoir."],
            ['Marqu√© par l\'Obscurit√©', "Une Tablette d'Ocre Obscurit√© en constante √©volution est tatou√©e sur votre chair. Lancez chaque matin quelle tablette elle est. La tablette ne peut √™tre utilis√©e qu'une fois par jour mais r√©ussit automatiquement."]
        ];

        var tablets = [
            ["Th√©orie du R√™ve (tablette ocre)", "La cible commence √† douter d'√™tre r√©elle. L'attaquer et se d√©fendre contre elle est -2 DR (+2 DR pour les PJ affect√©s)."],
            ["Compr√©hension Totale de la Mati√®re (tablette ocre)", "R√©pare ou casse un objet de taille normale, banal ou autre, y compris l'armure (augmente/diminue d'un niveau) et les armes."],
            ["Ping le Subconscient Partag√© (tablette ocre)", "Vous sentez la pr√©sence de cr√©atures vivantes √† moins de 70 pieds m√™me dans les pi√®ces adjacentes."],
            ["Pronostic Logique (tablette ocre)", "En utilisant la Logique Pure, vous pouvez d√©duire la nature de tout pi√®ge ou m√©canisme √† moins de 30 pieds ou de tout Pouvoir utilis√© √† moins de 60 pieds."],
            ["Sp√©l√©ophagie Carno-Organique (tablette ocre)", "Transmue une roche de la taille d'un enfant en viande br√ªl√©e et m√¢chue. Nourrit d4 personnes affam√©es."],
            ["Pneumotoxine Verrouill√©e dans le Temps (Lune Gelante) (tablette ocre)", "Cette tablette fissur√©e peut √™tre √©cras√©e en une poudre grossi√®re. Si elle est √©parpill√©e sur une cr√©ature, elle subit d6 d√©g√¢ts‚Äîsur un 6, elle s'√©touffe et meurt. La tablette r√©appara√Æt chaque matin en possession de son propri√©taire. Le test de PR√âSENCE de ce Pouvoir est inoffensif pour le porteur, d√©terminant si la poudre trouve la cible ou non."],
            ["Irrelevance Induite (tablette ocre)", "Le code de cette tablette supprime litt√©ralement la signification essentielle d'une cr√©ature pendant d4 rounds. Pendant ce temps, les ennemis ne l'attaqueront pas, m√™me si elle les attaque en premier."],
            ["Cryo-Condensation Structurelle (Lune Gelante) (tablette ocre)", "L'eau g√®le de l'air formant un pont de 15 pieds de long ou toute l'eau √† moins de 150 pieds (malheureusement √† l'exclusion de celle des cr√©atures vivantes) g√®le."],
            ["M√©ta-Alchimie (tablette ocre)", "L'utilisateur peut transformer un r√©cipient de liquide de l'une des mani√®res suivantes:<ol><li>Le transmuter en deux doses de Poison Rouge ou Noir.</li><li>Cr√©er la R√©pugnance de Vulark. Le buveur lance un test de ENDURANCE DC16 ou saute de grandes hauteurs.</li><li>Transformer le poison en eau ou en vin.</li></ol>"],
            ["Palpitation Cognitive M√©m√©tique (tablette ocre)", "Des changements corporels presque imperceptibles transmettent une simple peste mentale qui fait danser follement une cr√©ature pendant d4 rounds. Elle ne peut ni attaquer ni se d√©fendre pendant cette chor√©omanie."]
        ];


        //FIXME: I do not know this this comes from
        /*         var WTF_IS_THIS = [
                    ["Lance Apostate", "Avec la lance qui a autrefois tremp√© dans le sang de <em> ç…πou∆É …æ«ùsns</em>, vous effectuez un coup critique sur un 19 naturel en plus d'un 20. d6 d√©g√¢ts et Attaque DR10."],
                    ["Couronne de Mati√®re Grise", "Ce cercle toujours collant a vu le cerveau de nombreux rois-√©rudits se r√©pandre sur son bord √©pineux. Le porter accorde +1 PR√âSENCE et permet la compr√©hension des parchemins."],
                    ["Bouclier Tour de Taille Humaine", "On dit que ce targe aux proportions massives √©tait autrefois le plateau √† th√© d'un tavernier demi-g√©ant. En le maniant, la D√©fense est DR10 et utilise la FORCE au lieu de l'AGILIT√â."],
                    ["Crocs Pathog√®nes", "Vos dents sordides contiennent des ann√©es de salet√© et de crasse accumul√©es. Lors d'une morsure r√©ussie, l'ennemi doit tester ENDURANCE DR12 ou son syst√®me immunitaire SE BRISERA, subissant d10 d√©g√¢ts et le laissant infect√©."],
                    ["Chopine d'Esprit Rouill√©", "Un tankard tach√© de crachat trouv√© apr√®s une nuit de beuverie non rappel√©e. Buvez n'importe quel liquide et testez ENDURANCE DR12. R√©cup√©rez d6 PV en cas de succ√®s ou subissez la m√™me quantit√© de d√©g√¢ts en cas d'√©chec."],
                    ["Tatouages de Guerre du Culte Berserker", "Uniquement grav√©s sur les maniaques les plus f√©roces et assoiff√©s de sang. Apr√®s avoir tu√© un ennemi, vous pouvez entrer dans une rage de sang et faire une attaque √† DR14 contre un autre ennemi √† port√©e. Tant que vous continuez √† tuer √† chaque attaque, vous pouvez continuer √† attaquer, augmentant √† chaque fois le DR de +2."]
                ]; */

        // Named

        var names = ["Aerg-Tval", "Agn", "Arvant", "Belsum", "Belum", "Brinta", "B√∂rda", "Daeru", "Eldar", "Felban", "Gotven", "Graft", "Grin", "Grittr", "Haer√º", "Hargha", "Harmug", "Jotna", "Karg", "Karva", "Katla", "Keftar", "Klort", "Kratar", "Kutz", "Kvetin", "Lygan", "Margar", "Merkari", "Nagl", "Niduk", "Nifehl", "Pr√ºgl", "Qillnach", "Risten", "Svind", "Theras", "Therg", "Torvul", "T√∂rn", "Urm", "Urvarg", "Vagal", "Vatan", "Von", "Vrakh", "Vresi", "Wemut"];

        // Traits, Bodies, Bad Habits

        var traits = ["Sans fin aggrav√©", "Complexe d'inf√©riorit√©", "Probl√®mes avec l'autorit√©", "Grande gueule", "Cruel", "√âgocentrique", "Nihiliste", "Enclin √† l'abus de substances", "Conflit", "Ruse", "Vindicatif", "L√¢che", "Paresseux", "Suspicieux", "Impitoyable", "Inquiet", "Amer", "Trompeur", "Gaspilleur", "Arrogant", "Abrasif", "Sans mani√®res", "S√ªr de lui", "Fanatique", "Hypocrite", "Excentrique", "Morbide", "Unilat√©ral", "√ânigmatique", "H√©sitant", "Peur de l'engagement", "Agressif", "Moyope", "T√™tu", "Malicieux", "Sinistre", "Ritualiste", "Brutal", "Impr√©visible", "Pr√©judiciable", "Vulgaire", "N√©gligent", "Impulsif", "Calculateur", "P√©dant", "Cr√©dule", "Exigeant", "Plaintif", "Ingrat", "H√©doniste", "Superficiel", "Intr√©pide", "Intrigant", "Harc√®lement", "Fataliste", "D√©fensif", "Haineux", "Argumentatif", "Tourmenteur", "G√™n√©", "Irresponsable", "M√©lancolique", "Arbitraire", "Inconstant", "Imitatif", "Sarcastique", "Impoli", "Vain", "Mesquin", "Rancunier", "D√©loyal", "Strict", "Anarchiste", "D√©pendant", "Snob", "M√©fiance", "Assertif", "Sans charme", "Pompier", "Avare", "Sans tact", "Inutile", "Anxieux", "Morose", "Indisciplin√©", "N√©gligent", "Curieux", "Autoritaire", "Ennuyeux", "Rebelle"];

        var bodies = ["Regard maniaque fixe.", "Couvert de tatouages (pour certains) blasph√©matoires.", "Visage en putr√©faction. Porte un masque.", "A perdu trois orteils, boite.", "Affam√©: maigre et p√¢le.", "Une main remplac√©e par un crochet rouill√© (d6 d√©g√¢ts).", "Dents en d√©composition.", "√âtrangement beau, √©trangement propre.", "Mains cro√ªt√©es de plaies.", "Cataractes se propageant lentement mais s√ªrement dans les deux yeux.", "Cheveux longs et emm√™l√©s, au moins un cafard en r√©sidence.", "Oreilles cass√©es, √©cras√©es.", "Tremblant et b√©gayant √† cause de l√©sions nerveuses ou de stress.", "Corpulent, vorace, bavant.", "Une main manque de pouce et d'index, agrippe comme un homard.", "Nez rouge, enfl√© d'alcoolique.", "Visage maniaco-reposant, se faire des amis est difficile.", "Pied d'athl√®te chronique. Pique.", "≈íil r√©cemment taillad√© et puant couvert d'un cache-≈ìil.", "Ongles fissur√©s et noirs, peut-√™tre sur le point de tomber.", "Nez qui coule constamment.", "Manque de nombril.", "Excroissance bulbeuse sur le cou. Elle bouge quand personne ne regarde.", "L√®vres gerc√©es et fendill√©es.", "Douloureusment Moyen.", "Visage couvert de pustules.", "De petite taille.", "Os qui craquent √† chaque mouvement.", "Plus grand que la plupart.", "Sourcils perdus par le feu et la m√©moire.", "Nez cass√©, tordu pour toujours.", "Ventre racontant des histoires de trop de bi√®res.", "Compl√®tement et absolument chauve.", "Langue fourchue. Un signe?", "Paupi√®res marqu√©es au fusain, toujours.", "M√©ga cicatrice o√π un poumon se trouvait autrefois.", "N√© avec six doigts √† chaque main.", "Petits yeux, rendant n'importe qui suspect.", "Cheveux r√™ches comme des soies de cochon.", "Mauvais dos et pire posture."];

        var bad_habits = ["Collectionne obsessionnellement les petites pierres pointues.", "N'utilisera pas de lame sans la tester sur votre propre chair. Bras tricot√©s de cicatrices.", "Ne peut pas s'arr√™ter de boire une fois commenc√©.", "Accro au jeu. Doit parier tous les jours. Si vous perdez, augmentez et pariez √† nouveau.", "Ne peut tol√©rer aucune critique. Entra√Æne rage et pleurs.", "Incapable d'aller droit au but. N'a jamais vraiment termin√© une histoire.", "Le meilleur ami est un cr√¢ne. Portez-le avec vous, dites-lui tout, vous ne faites confiance √† personne de plus.", "Vous vous curez le nez si profond√©ment qu'il saigne.", "Riez hyst√©riquement √† vos propres blagues que vous expliquez ensuite en d√©tail.", "Nihiliste. Vous insistez pour dire √† tout le monde que vous √™tes nihiliste et expliquer pourquoi.", "Mangeur d'insectes inv√©t√©r√©.", "La r√©ponse au stress est l'affichage esth√©tique. Plus les choses empirent, plus vous devez √™tre chic.", "D√©p√¥t permanent de flegme dans la gorge. Tousse, renifle, crache et avale continuellement.", "Pyromane.", "Perd constamment des objets importants et oublie des faits vitaux.", "Agitateur de merde insecure. Parlera de quiconque vient de quitter la pi√®ce.", "Vous b√©gayez en mentant.", "Vous gloussez follement aux pires moments possibles.", "Vous sifflez en essayant de vous cacher. Vous le nierez. Sifflez lorsque 5, 7, 9, 11 ou 13 est lanc√© sur un d20.", "Vous fabriquez des bijoux √† partir des dents des morts.", "Impossible de se souvenir d'un nom pour sauver votre vie. Tr√®s bon pour les visages, cependant.", "Compuls√© √† l√©cher les choses propres.", "B√¢ille constamment.", "Ronfle comme un troll r√™veur. Les autres doivent tester ENDURANCE pour dormir.", "Ne mange que des choses avec des noms propres.", "Vole obsessionnellement ceux qui ont moins. Craint ceux qui ont plus.", "N'a jamais appris √† partager.", "Ressent le besoin de signaler toutes les erreurs des autres. En d√©tail.", "Vous vous rongez les ongles et les gardez pour plus tard.", "Terrifi√© d'√™tre seul.", "Ne fait jamais confiance √† rien avec 4 jambes.", "Vous marchez dans votre sommeil, 1 fois sur 12 vous vous r√©veillez quelque part de tr√®s malheureux.", "Convaincu d'√™tre un chanteur talentueux. Ce n'est pas le cas.", "Un terrible gagnant et un perdant encore pire. Tout est une comp√©tition.", "Convaincu que vous ne pouvez pas mourir.", "Mythomane, vous aimez cr√©er vos propres v√©rit√©s.", "Le travail stupide est en dessous de vous.", "Avalle compulsivement des pi√®ces d'argent, pour les garder en s√©curit√© pour l'au-del√†. Jingle-jangle quand vous courez.", "Peut parler aux chevaux. Ou du moins le pensez-vous.", "Vous √™tes un philosophe. Mais √™tes-vous vraiment un philosophe?"];

        // Tales

        var tales = ["Poursuivi pour homicide involontaire. Il y a une prime.", "Endett√© massivement. La dette est √©chang√©e √† des groupes successivement plus impitoyables.", "Poss√®de un objet rare et recherch√©.", "A une blessure maudite qui ne gu√©rit jamais.", "A eu une liaison ill√©gale, immorale et secr√®te avec un membre de la famille royale. A des preuves.", "Ancien membre de culte √©chapp√©. Terrifi√© et parano√Øaque. D'autres cultistes sont partout.", "Un voleur d'identit√© qui a r√©cemment tu√© et remplac√© cette personne.", "Banni et d√©savou√© pour des actes non sp√©cifi√©s. Ne peut jamais rentrer √† la maison.", "A d√©sert√© l'arm√©e apr√®s avoir √©t√© t√©moin d'un massacre, prime sur la t√™te. Chass√© par d'anciens amis.", "A tr√®s r√©cemment assassin√© un proche parent. Tr√®s r√©cemment.", "Un cube de puzzle a √©t√© mal calibr√© (ou l'a-t-il √©t√©?), r√©veillant une abomination endormie.", "Les cr√©atures mal√©fiques aiment l'odeur de votre trace et y sont attir√©es, apportant le d√©sastre dans votre sillage.", "Une blessure de bataille a laiss√© un √©clat de m√©tal se rapprochant lentement de votre c≈ìur. Chaque jour, il y a 2% de chances qu'il l'atteigne.", "La violence vous a forc√© √† vous r√©fugier dans la nature. Vous pensez que les arbres qui bougent chuchotent. Vous parlez √†, criez sur, attaquez les arbres.", "Maudit de partager les cauchemars des autres, vous dormez tr√®s, tr√®s loin.", "En guerre permanente avec tous les corvid√©s. Aucun contact sans violence. Vous portez une fronde.", "Apr√®s avoir r√™v√© d'un temple souterrain √† un dieu oubli√©, vous comprenez les chants des insectes et des vers.", "√ätre suivi et observ√© par un golem apr√®s un accord que vous savez avoir √©t√© effac√© de votre esprit.", "\'Br√ªler ou √™tre br√ªl√©\' est le destin que vous acceptez.", "Votre chair gu√©rit deux fois plus vite, mais vos compagnons deux fois plus lentement. Vous voyez un \'ange gardien\' √† plusieurs yeux."];

        // Scrolls

        var unclean_scrolls = [
            ["Paumes Ouvrent la Porte du Sud (impur)", "Une boule de feu frappe d2 cr√©atures infligeant d8 d√©g√¢ts par cr√©ature"],
            ["Langue d'Eris (impur)", "Une cr√©ature de votre choix est confuse pendant 10 minutes"],
            ["Te-Le-Kin-Esis (impur)", "D√©place un objet jusqu'√† d10*10 pieds pendant d6 minutes"],
            ["L√©vitation de Lucy-Fires (impur)", "Planez pendant PR√âSENCE+d10 rounds"],
            ["D√©mon des Capillaires (impur)", "Une cr√©ature suffoque pendant d6 rounds, perdant d4 PV par round"],
            ["Metzhuotl Aveugle Ton ≈íil (impur)", "Une cr√©ature devient invisible pendant d6 rounds ou jusqu'√† ce qu'elle soit endommag√©e, attaquant/d√©fendant avec DR6"],
            ["Psychopompe R√©pugnant (impur)", "Invoque (d6): 1-3 d4 squelettes, 4-6 d4 zombies"],
            ["Paupi√®re Aveugle l'Esprit (impur)", "d4 cr√©atures s'endorment pendant une heure sauf si elles r√©ussissent un test DR14"],
            ["Mort (impur)", "Toutes les Cr√©atures √† moins de 30 pieds perdent un total de 4d10 PV"]
        ];
        var sacred_scrolls = [
            ["Gr√¢ce d'un Saint Mort (sacr√©)", "d2 cr√©atures r√©cup√®rent d10 PV chacune"],
            ["Gr√¢ce pour un P√©cheur (sacr√©)", "Une cr√©ature de votre choix obtient +d6 sur un jet (d√©g√¢ts, tests, etc.)"],
            ["Chuchotements Passent la Porte (sacr√©)", "Posez trois questions √† une cr√©ature d√©c√©d√©e"],
            ["√âgide de la Douleur (sacr√©)", "Une cr√©ature de votre choix gagne 2d6 PV suppl√©mentaires pendant 10 rounds"],
            ["Destin Non R√©alis√© (sacr√©)", "Une cr√©ature, morte depuis pas plus d'une semaine, est r√©veill√©e avec de terribles souvenirs"],
            ["Parole Bestiale (sacr√©)", "Vous pouvez parler avec les animaux pendant d20 minutes"],
            ["Fausse Aube/Chariot de Nuit (sacr√©)", "Lumi√®re ou noir absolu pendant 3d10 minutes"],
            ["Pas Herm√©tique (sacr√©)", "Vous trouvez tous les pi√®ges sur votre chemin de 2d10 minutes"],
            ["Regard Consumant de Roskoe (sacr√©)", "d4 cr√©atures perdent d8 chacune"],
            ["Syntaxe √ânochienne (sacr√©)", "Une cr√©ature ob√©it aveugl√©ment √† un seul commandement"]
        ];

        // Unholy Feats

        var feats = [
            ["Coup de Gr√¢ce de l'Assassin", "Une prise ferme. Un couteau bien aiguis√©. C'est tout ce qu'il faut pour que quelqu'un disparaisse dans les ruelles de Galgenbeck. Vous √™tes devenu adepte de cela au fil des ans.", "R√©ussir un test de FORCE DR12 vous permet d'agripper un ennemi inconscient et de critiquer automatiquement avec une arme blanche √† une main."],
            ["Ma√Ætre de Guerre Sanguinaire", "Vous avez √©t√© appel√© au combat, non pas pour votre prouesse avec la lame et le bouclier. Pas pour votre vitesse et votre puissance. Mais parce que les mots que vous prononciez apportaient la mort √† vos ennemis.", "Vous pouvez lancer des Pouvoirs en portant une armure moyenne. Vous pouvez prendre cette prouesse une deuxi√®me fois pour inclure √©galement l'armure lourde."],
            ["√ârudit Bestial", "Vous √©tudiez les b√™tes de la terre. Les √©ventrant et r√©pandant les visc√®res pour d√©couvrir les secrets du monde.", "Vous pouvez scruter et voir l'avenir avec les entrailles d'un animal. Gagnez un pr√©sage pour chaque 10PV que la b√™te avait, mais jamais plus que votre maximum de pr√©sages. Utilisable une fois par esp√®ce animale.<br>Les entrailles des b√™tes peuvent √©galement fournir des informations √©clairantes."],
            ["Jointures Ensanglant√©es", "Des ann√©es de combats √† mains nues ont transform√© vos mains en armes contondantes mortelles. Elles sont lourdes de cicatrices des coupables et des innocents.", "Vos attaques √† mains nues infligent d6 d√©g√¢ts et ignorent l'armure l√©g√®re. Vous pouvez prendre cette prouesse une deuxi√®me fois pour l'augmenter √† d8 d√©g√¢ts et √† l'armure moyenne. Vous pouvez prendre cette prouesse une troisi√®me fois pour l'augmenter √† d10 d√©g√¢ts et les faire ignorer toute armure.<br>G√¢cher une attaque √† mains nues signifie que vous vous cassez une main en vous infligeant les d√©g√¢ts. Vous devez chercher l'aide d'un sp√©cialiste pour vous faire remettre les os."],
            ["Pacte de Sang", "C'est un monde cruel pour √™tre tout seul. Mais vous avez trouv√© un moyen d'√©viter ce destin.", "Formez un pacte de sang avec un participant volontaire. Vous pouvez communiquer par la pens√©e quelle que soit la distance, cela ne dispara√Æt jamais. Tout ce que l'un √©prouve, l'autre l'√©prouve aussi. Cela inclut les blessures et la mort."],
            ["Rage Sanguinaire", "La ru√©e du combat est addictive. Vous √™tes toujours √† la recherche de cette sensation. C'est tuer ou √™tre tu√©. Vous ne pouvez pas vous arr√™ter pour poser des questions.", "Lorsque vous portez un coup qui tue une cr√©ature, vous devez vous d√©placer et attaquer une autre (cela peut inclure des alli√©s), ajoutant d6 d√©g√¢ts pour chaque cr√©ature tu√©e. Votre assaut s'arr√™te lorsque vous ne parvenez pas √† tuer et vous tombez au sol √©puis√©, perdant votre prochain tour."],
            ["Artisan d'Os", "Vous ne croyez pas qu'il faille laisser les choses se perdre. Y compris les cadavres des morts", "Vous pouvez fabriquer un √©quipement d'une qualit√© √©trangement √©lev√©e en utilisant un certain nombre de cadavres humano√Ødes.<ul><li>Une arme d6, 1 cadavre en os.</li><li>Un bouclier, 5 cadavres en os.</li><li>Armure l√©g√®re, 10 cadavres en os.</li></ul>"],
            ["Boucher", "Vous avez hach√© du b√©tail et de la volaille en petits morceaux auparavant. Vous savez ce qui les fait fonctionner et comment ils sont faits. Les humains ne sont pas si diff√©rents.", "Lors d'un test d'AGILIT√â DR12, tout alli√© qui meurt pr√®s de vous devient bris√© √† la place, alors que vous tentez une chirurgie de sauvetage rapide. Si la personne meurt toujours, vous pouvez faire d4 rations √† partir du cadavre."],
            ["Tueur Calme", "Le couteau ou la fl√®che le plus prudent est le plus mortel. Vous avez un ≈ìil vif pour les lacunes et les plis dans l'armure.", "Une fois par tour lors d'une attaque √† distance ou au corps √† corps, vous pouvez relancer les d√©g√¢ts inflig√©s et conserver le r√©sultat le plus √©lev√©."],
            ["Yeux de Chat", "Vous avez lev√© les yeux vers les oiseaux pour un signe. Os dispers√©s, entrailles r√©pandues. En vain. Mais un jour, vous avez vu votre destin dans les yeux d'un chat r√¥dant dans l'ombre.", "Vision parfaite dans l'obscurit√©, mais la lumi√®re du soleil br√ªle vos yeux. ‚àí2DR pr√©sence dans l'obscurit√©, +2DR en plein jour.<br>Regarder dans les yeux d'une b√™te sauvage vous permet de ressentir tout ce qu'elle ressent."],
            ["Double Manieur", "Vous n'√™tes pas un soldat entra√Æn√©. Mais vous pensez que deux armes devraient vous aider √† tuer deux fois plus vite. Cela ne vous a pas encore manqu√©.", "Vous ne subissez aucune p√©nalit√© lorsque vous attaquez avec deux armes, vous lancez les deux d√©s de d√©g√¢ts et combinez les r√©sultats."],
            ["Visions Fatidiques", "Les destins dirigent votre voyage √† travers le monde mourant. On ne peut qu'esp√©rer qu'ils vous guident vers la r√©demption et non vers la destruction.", "Consommez un pr√©sage et passez quelques instants en m√©ditation tranquille. Posez une question au Ma√Ætre de Jeu concernant la situation actuelle.<br>Une vision bizarre vous sera accord√©e et fournira des informations √©clairantes. Le MJ lance un d4 en secret, sur un 1 la vision est trompeuse."],
            ["Estomac de Fer", "Lorsque les cultures √©chouent, et que le b√©tail donne naissance √† des abominations non comestibles. On apprend √† ne pas √™tre difficile en mati√®re de nourriture.", "Vous pouvez consommer de la chair pourrie, putride avec un test de ENDURANCE DR6. D'autres t√©moins peuvent trouver cela d√©go√ªtant. Les parias lancent un test de moral."],
            ["Premi√®re Frappe", "Vous croyez que les Champs Chatoyants sont pour ceux qui se lancent au combat, ceux qui sont les premiers √† r√©colter la gloire.", "Que votre camp r√©ussisse ou √©choue le jet d'initiative, vous pouvez toujours agir en premier si votre action implique d'infliger des d√©g√¢ts."],
            ["Coup de Guts", "Vous avez vu un homme d√©capiter un cheval avec une √©p√©e g√©ante. C'√©tait moins une √©p√©e qu'une grande dalle de fer. Vous ne pouvez pas vous emp√™cher de penser aux yeux vides de la b√™te chaque fois que vous balancez votre propre √©p√©e.", "En maniant des zweihand (armes √† deux mains), vous pouvez frapper avec +2 √† votre DR. Si l'attaque touche, vous ajoutez d6 √† vos d√©g√¢ts. Manquer permet √† votre adversaire de frapper avec une attaque que vous pouvez d√©fendre √† +2DR"],
            ["H√©raut de la Mis√®re", "Vous sentez une sombre b√©n√©diction couler dans vos veines. Vous vous √™tes d√©di√© au disque noir qui bloquera le soleil.", "Gagnez 4 pr√©sages Maximum au lieu de 2. Tant que vous vivez, le MJ lance deux d√©s de mis√®re chaque jour."],
            ["Gu√©risseur Herboriste", "Vous avez pass√© ce qui semblait √™tre une √©ternit√© sous l'apprentissage brumeux d'un ma√Ætre herboriste. Vous √™tes parti avec une nouvelle perspective sur la vie, et quelques comp√©tences suppl√©mentaires.", "Une fois par jour, vous pouvez fouiller pour trouver les herbes et la flore n√©cessaires pour cr√©er un √©lixir gu√©rissant l'infection qui soigne √©galement d4 PV.<br>PR√âSENCE DR12 pour tenter ce traitement, √©chouer cr√©e √† la place une toxine infligeant d4 d√©g√¢ts."],
            ["Croissance Horrible", "Peut-√™tre que c'est quelque chose que vous avez mang√©, ou qu'un Pouvoir est devenu malveillant. Quoi qu'il en soit, vous ne pouvez pas vous en d√©barrasser.", "Vous faites pousser violemment un bras et une main suppl√©mentaires. Il fonctionne comme vos autres bras et peut tr√®s bien saisir les choses. Les autres le voient comme un signe du mal."],
            ["Hyper Conscience", "Vous √™tes parano√Øaque. Voir le danger dans chaque ombre. Tout veut vous tuer. Vous √™tes nerveux avec des mouvements d'oiseau.", "Vous ne pouvez jamais √™tre victime d'une attaque surprise. De plus, votre camp prend l'initiative sur un 3+."],
            ["M√©moire Immortelle", "Vous √™tes hant√© par les souvenirs de ceux qui sont tomb√©s. M√™me si leurs esprits sont partis, et que les corps sont poussi√®re, leurs souvenirs persistent pour l'√©ternit√©.", "Chaque fois que vous rencontrez un lieu de grande souffrance. Vous pouvez revivre la trag√©die √† travers un souvenir qui persiste.<br>Il y a 1 chance sur 20 que les choses deviennent trop r√©elles. Vous subissez le m√™me sort dans la r√©alit√©. Cela pourrait faire r√©appara√Ætre des cr√©atures et des Pouvoirs."],
            ["Conteur Inspir√©", "Vos contes apportent joie et sourires √† tout le monde autour de vous, m√™me dans les moments les plus sombres. Tout cela est un mensonge bien s√ªr, mais qu'importe?", "Test de PR√âSENCE DR9 au repos pour tisser un conte convaincant. augmentez le DR+1 pour chaque auditeur suppl√©mentaire. Le succ√®s permet √† tout le monde de gagner un pr√©sage. Vous ne pouvez pas d√©passer votre nombre maximum de pr√©sages."],
            ["Sangsue", "Un go√ªt acquis. Ou peut-√™tre une maladie. Peut-√™tre une mal√©diction. Une soif √©ternelle.", "Le sang vous soigne et vous nourrit. Une pinte de sang vous soigne pour d4 PV. Vous pouvez toujours manger de la nourriture normale, mais vous subissez les effets de la famine apr√®s un jour."],
            ["Sympathique", "Il y a quelque chose dans votre sourire. La fa√ßon dont vous vous composez. La fa√ßon dont vous parlez. Vous √™tes mieux d√©crit comme accessible. C'est bizarre.", "Chaque fois qu'un jet de r√©action est effectu√©, lancez 3d6 et conservez les deux d√©s les plus √©lev√©s."],
            ["Armure Vivante", "Vous avez surv√©cu √† la guerre. Vous avez surv√©cu gr√¢ce √† l'acier froid qui a √©t√© cicatris√© pour que vous puissiez vivre. C'est devenu une partie de vous et vous avez appris √† porter son fardeau.", "Supprimez la p√©nalit√© d'AGILIT√â pour l'armure que vous portez actuellement. Cela n'affecte pas vos jets de D√©fense.<br>Vous ne pouvez pas retirer votre armure sans mourir douloureusement. Cela se produit √©galement si elle se brise. La r√©parer est possible, mais tr√®s douloureux."],
            ["Chanceux", "Destin? Cela semble de mauvais augure. Vous pr√©f√©rez la chance. De bonnes choses semblent toujours vous arriver. Cela vous a berc√© dans un faux sentiment de s√©curit√©. Combien de temps cela durera-t-il?", "Vous n'avez pas de pr√©sages. Et aucun pr√©sage ne peut √™tre d√©pens√© pour influencer votre jet. Au lieu de cela, vous lancez toujours 2d20 pour vos tests et choisissez le r√©sultat le plus √©lev√©.<br>Cependant, vous g√¢chez toujours si l'un d'eux donne 1. Votre chance doit finir par s'√©puiser."],
            ["Tir Mortel", "Votre lame a faim. Le sang est la seule chose qui puisse la rassasier. Une fois tir√©e, elle l'exige, et vous punira si vous √©chouez.", "Votre premi√®re attaque en combat inflige toujours le maximum de d√©g√¢ts en supposant que l'attaque touche. Si vous manquez, votre adversaire peut vous attaquer. Cela peut √™tre d√©fendu √† +2DR"],
            ["N√©gociateur", "Vous abhorrez les conflits. Pacifiste par nature, il est parfois pr√©f√©rable d'essayer de d√©samorcer la situation. Certains vous traitent de l√¢che.", "Lancez un test de PR√âSENCE, DR6+ moral le plus √©lev√© de l'adversaire. Le succ√®s signifie que le combat s'arr√™te. Pour l'instant."],
            ["Survivaliste de l'Outback", "Le temps pass√© dans la nature hostile vous a appris √† prosp√©rer. De petits conforts peuvent √™tre cr√©√©s m√™me dans ce monde sombre.", "Test de PR√âSENCE DR9 pour cr√©er un camping confortable. DR+1 pour chaque personne suppl√©mentaire qu'il abrite. Au repos dans ce camp, tout le monde r√©cup√®re 2d6 PV au lieu de d6"],
            ["Chef de Partie", "Vous avez ma√Ætris√© l'art de cuisiner de la bouillie. Capable de rendre la nourriture la plus horrible quelque peu agr√©able.", "PR√âSENCE DR9 pour cuisiner un repas au repos. DR+1 pour chaque portion suppl√©mentaire. En cas de succ√®s, vous pouvez √©tirer une seule ration pour nourrir toute l'√©quipe, √©chouer signifie que la ration est g√¢t√©e."],
            ["Fl√ªtiste", "Vous pouvez parler avec les rats, siffler vous permet d'en attirer d4. Ils n'ont peut-√™tre pas d'informations fiables mais sont toujours heureux de converser avec vous.", undefined],
            ["Mot de Pouvoir", "Les puissances en place murmurent de sombres secrets √† vos oreilles partout o√π vous marchez. Leur jacassement incessant ne vous donne jamais la paix.", "Vous connaissez de mani√®re inn√©e un Pouvoir sacr√© ou impur al√©atoire. De plus, une fois que vous avez lu un parchemin, vous pouvez graver ses glyphes √©sot√©riques dans votre chair et n'avez plus besoin du parchemin lui-m√™me pour le lancer.<br> Chaque nuit, il y a 1 chance sur 20 que vous lanciez accidentellement un Pouvoir dans votre sommeil. Ce Pouvoir a √©galement 1 chance sur 6 de g√¢cher."],
            ["Sens Pr√©dateur", "Quelque part le long de votre lign√©e, la m√©chancet√© a √©t√© introduite. Son influence est mince dans votre sang mais toujours pr√©sente.", "Vous avez un odorat aiguis√© en ce qui concerne les humains. Vous pouvez renifler des individus d'une pi√®ce √† l'autre, identifier quelqu'un, et m√™me les suivre facilement avec un test de PR√âSENCE DR12."],
            ["Attaquant Imprudent", "Trop z√©l√©, faisant constamment de mauvais choix, un sens du jugement extr√™mement m√©diocre. Mais vous avez v√©cu tout ce temps, vous devez donc faire quelque chose de bien.", "Vous pouvez attaquer la m√™me cible deux fois √† votre tour. Manquer la deuxi√®me attaque permet √† votre adversaire de porter un coup que vous pouvez d√©fendre √† +2DR."],
            ["Brise-Bouclier", "Vous savez que le moment o√π un adversaire est le plus vuln√©rable est juste apr√®s qu'il ait attaqu√©.", "Chaque fois que vous utilisez votre bouclier pour bloquer tous les d√©g√¢ts entrants, vous pouvez tenter une contre-attaque avec +3 d√©g√¢ts."],
            ["√âcorcheur", "Votre peau rampe et d√©mange constamment. Toujours en train de former des cro√ªtes et ignoble. La peau des autres vous apporte un r√©confort momentan√©.", "Vous pouvez porter la peau d'une cr√©ature que vous avez r√©cemment tu√©e pour vous d√©guiser. Vous ressemblez, sonnez et sentez m√™me comme eux.<br>La peau se d√©compose apr√®s d4 heures et vous revenez √† votre forme normale et mis√©rable."],
            ["Sang Vil", "Quelque chose ne va pas avec votre sang. Il ressemble plus √† l'ichor putride d'un cadavre.", "Chaque fois qu'une cr√©ature vous attaque avec une morsure et vous blesse, elle est empoisonn√©e. Elle subit d4 d√©g√¢ts pendant d6 rounds. De plus, si vous souffrez d'une infection, lancez un d2. Sur un 2, vous n'avez pas d'infection."]
        ];
        var abilities = ["-3", "-3", "-3", "-3", "-2", "-2", "-1", "-1", "0", "0", "0", "0", "+1", "+1", "+2", "+2", "+3", "+3", "+3", "+3"]

        function update_souls() {
            document.getElementById("souls").innerHTML = '';
            for (var i = 0, len = localStorage.length; i < len; i++) {
                if (localStorage.key(i).slice(0, 2) == 'CY') { continue; }
                var item = localStorage.getItem(localStorage.key(i)).split('&666&', 2);
                if (item.length < 2) { continue; }
                document.getElementById("souls").innerHTML +=
                    `<a style='padding-right: 10px;' href='${window.location.pathname}?${localStorage.key(i)} '>${item[0]}</a>`;
            }
            if (localStorage.length == 0) { document.getElementById("saved_souls").style.display = "none"; return }
        }

        function removeSmallest(arr) {
            return arr.sort().filter((_, i) => i)
        }

        function two_unique(array) {
            var x = frandom_item_from(array);
            var y;
            do {
                y = frandom_item_from(array);
            } while (x == y);

            return [x, y]
        }
        function fallbackCopyTextToClipboard(text) {
            var textArea = document.createElement("textarea");
            textArea.value = text;

            // Avoid scrolling to bottom
            textArea.style.top = "0";
            textArea.style.left = "0";
            textArea.style.position = "fixed";

            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                if (document.execCommand('copy')) { show_status('Copi√© dans le presse-papier'); }
            } catch (err) {
                console.error('Fallback: Oops, unable to copy', err);
            }

            document.body.removeChild(textArea);
        }
        function copyTextToClipboard(text) {
            if (!navigator.clipboard) {
                fallbackCopyTextToClipboard(text);
                return;
            }
            navigator.clipboard.writeText(text).then(function () {
                show_status('Copi√© dans le presse-papier');
            }, function (err) {
                console.error('Async: Could not copy text: ', err);
                fallbackCopyTextToClipboard(text);
            });
        }

        function load_char() {
            if (!window.location.hash && !window.location.search) { reseed(); klass = (d(classes.length) - 1).toString(); return; }

            var tag;
            if (window.location.hash) {
                tag = window.location.hash.split('&');
            } else if (window.location.search) {
                tag = window.location.search.split('&');
            }
            if (tag.length < 2) { return; }
            if (tag[1].length != 2) { return; }
            if (tag[2]) {
                if (tag[2].length != 2) { return; }
                total_checks = 2;
                document.querySelectorAll('input[type=checkbox]')[tag[2][0]].checked = true;
                document.querySelectorAll('input[type=checkbox]')[tag[2][1]].checked = true;
                selected = tag[2].split('');
            }

            _seed = tag[0].slice(1,);
            seed();
            klass = tag[1];
        }
        load_char();
        generate();
        if (check_edits(search())) {
            load_edits(search());
            document.getElementById("delete").style.display = "inline";
        }
        update_souls();


        // Number of Attributes checked smaller than or equal to 2.
        // If 2 or more, disable unchecked boxes.
        var checkboxes = document.querySelectorAll('input[type=checkbox]');
        for (var i = 0, len = checkboxes.length; i < len; i++) {
            checkboxes[i].addEventListener('change', function () {
                if (this.checked) {
                    total_checks += 1;
                } else {
                    total_checks -= 1;
                }
                if (total_checks >= 2) {
                    for (var i = 0, len = checkboxes.length; i < len; i++) {
                        if (!checkboxes[i].checked) {
                            checkboxes[i].disabled = true;
                        }
                    }
                } else {
                    for (var i = 0, len = checkboxes.length; i < len; i++) {
                        checkboxes[i].disabled = false;
                    }
                }
            })
        }

        document.getElementById("share").addEventListener('click', function () {
            const tag = [_seed, klass.padStart(2, '0'), selected.join('')].join('&');
            if (history.pushState) {
                var newurl = `${window.location.protocol}//${window.location.host}${window.location.pathname}?${tag}`;
                window.history.pushState({ path: newurl }, '', newurl);
            }
            copyTextToClipboard(`${window.location.origin}${window.location.pathname}?${tag}`);
        })
        document.getElementById("edit").addEventListener('click', function () {
            const tag = [_seed, klass.padStart(2, '0'), selected.join('')].join('&');
            if (history.pushState) {
                var newurl = `${window.location.protocol}//${window.location.host}${window.location.pathname}?${tag}`;
                window.history.pushState({ path: newurl }, '', newurl);
            }
            enable_edits();
            // document.getElementById("klass").style.display = "none";
            document.getElementById("klass_selector").disabled = true;
            document.getElementById("attributes").style.display = "none";
            document.getElementById("generate").disabled = true;
            document.getElementById("share").style.display = "none";
            document.getElementById("edit").style.display = "none";
            document.getElementById("save_edits").style.display = "inline";
            document.getElementById("restore").style.display = "inline";
            document.getElementById("delete").style.display = "inline";
            document.getElementById("stop").style.display = "inline";
        })

        document.getElementById("save_edits").addEventListener('click', function () {
            save_edits(search());
            update_souls();
        })
        document.getElementById("restore").addEventListener('click', function () {
            load_edits(search());
            update_souls();
        })
        document.getElementById("delete").addEventListener('click', function () {
            delete_edits(search());
            update_souls();
        })
        document.getElementById("stop").addEventListener('click', function () {
            disable_edits();
            // document.getElementById("klass").style.display = "block";
            document.getElementById("klass_selector").disabled = false;
            if (document.getElementById("klass_selector").value == 0) {
                document.getElementById("attributes").style.display = "block";
            }
            document.getElementById("generate").disabled = false;
            document.getElementById("share").style.display = "inline";
            document.getElementById("edit").style.display = "inline";
            document.getElementById("save_edits").style.display = "none";
            if (check_edits(search())) {
                document.getElementById("restore").style.display = "inline";
                document.getElementById("delete").style.display = "inline";
            } else {
                document.getElementById("restore").style.display = "none";
                document.getElementById("delete").style.display = "none";
            }
            document.getElementById("stop").style.display = "none";
        })

        // Show/hide excellence attributes based on class selection
        document.getElementById("klass_selector").addEventListener('change', function (e) {
            if (e.target.value == 0) {
                document.getElementById("attributes").style.display = "inline";
            } else {
                document.getElementById("attributes").style.display = "none";
            }
        })

        // Generate button
        document.getElementById("generate").addEventListener('click', function () {
            if (document.getElementById("klass_selector").value == -1) {
                klass = (Math.floor(Math.random() * 10) + 1).toString();;
            } else {
                klass = document.getElementById("klass_selector").value;
            }
            history.pushState("", document.title, window.location.pathname);
            document.getElementById("restore").style.display = "none";
            document.getElementById("delete").style.display = "none";
            reseed();
            generate();
        })

        // Character Generation
        function generate() {
            document.getElementById("equipment").innerHTML = "";
            document.getElementById("scrolls").innerHTML = "";
            document.getElementById("armor").innerHTML = "";
            document.getElementById("weapon").innerHTML = "";
            document.getElementById("weapon_2").innerHTML = "";
            document.getElementById("money").innerHTML = "";
            document.getElementById("description").innerHTML = "";
            document.getElementById("skills").innerHTML = "";
            document.getElementById("skills_short").innerHTML = "";
            document.getElementById("traits").innerHTML = "";
            document.getElementById("class_name").innerHTML = classes[parseInt(klass)];
            if (klass == 9) {
                document.getElementById("name").innerHTML =
                    `${frandom_item_from(pale_one_name_1)} ${frandom_item_from(pale_one_name_2)} ${frandom_item_from(pale_one_name_3)}`;
            } else {
                document.getElementById("name").innerHTML = names[(fd(6) - 1) * 8 + fd(8) - 1];
            }
            selected = Array.from(document.querySelectorAll('input[type=checkbox]:checked')).map(e => e.value);
            if (klass == 0) {
                if (selected.length == 0) {
                    selected = two_unique(Array.from(document.querySelectorAll('input[type=checkbox]'))).map(e => e.value);
                } else {
                    two_unique(Array.from(document.querySelectorAll('input[type=checkbox]'))).map(e => e.value);
                }
            }

            var memory;
            if (klass == 0) {
                story = fd(tales.length);
                memory = tales[story - 1];
            } else if (klass == 1) {
                memory = `Vos premiers souvenirs: ${frandom_item_from(fanged_deserter_memory)}`;
            } else if (klass == 2) {
                memory = `Enfant, ${frandom_item_from(gutterborn_memory)}`;
            } else if (klass == 3) {
                memory = `Vous ${frandom_item_from(esoteric_hermit_memory)}`;
            } else if (klass == 4) {
                memory = `Les choses allaient bien, puis ${frandom_item_from(wretched_royalty_memory)}`;
            } else if (klass == 5) {
                memory = `Vous venez ${frandom_item_from(heretical_priest_memory)}`;
            } else if (klass == 6) {
                memory = `Vous avez connu ${frandom_item_from(occult_herbmaster_memory)}`;
            } else if (klass == 7) {
                if (fd(2) == 1) {
                    memory = `Racines de votre abattement: ${frandom_item_from(forlorn_philosopher_memory_1)}`;
                } else {
                    memory = `Abattement de vos racines: ${frandom_item_from(forlorn_philosopher_memory_2)}`;
                }
            } else if (klass == 8) {
                memory = `<b>Gloire √† ${frandom_item_from(dead_gods_prophet_memory_1)}, ${frandom_item_from(dead_gods_prophet_memory_2)} ${frandom_item_from(dead_gods_prophet_memory_3)}!</b>`;
            } else if (klass == 9) {
                memory = `Vous ${frandom_item_from(pale_one_memory)}`;
            } else if (klass == 10) {
                memory = `Votre premi√®re mort: ${frandom_item_from(cursed_skinwalker_memory)}`;
            } else if (klass == 11) {
                memory = `Vous avez sign√© votre contrat ${frandom_item_from(songbird_memory)}`;
            }
            var trait1 = frandom_item_from(traits);
            var trait2 = trait1;
            while (trait2 == trait1) {
                var trait2 = frandom_item_from(traits);
            }
            var habit = fd(bad_habits.length);
            var story;
            document.getElementById("description").innerHTML += `<p>${descriptions[parseInt(klass)]}</p>`;
            document.getElementById("description").innerHTML += `<p>${memory}</p>`;
            document.getElementById("traits").innerHTML +=
                `<p><b>Mental</b>: ${trait1} et ${trait2.toLowerCase()}<br><b>Physique</b>: ${frandom_item_from(bodies)} <br><b>Mauvaise habitude</b>: ${bad_habits[habit - 1]}</p>`


            var skills = [];
            if (klass == 0) {
                skills.push(base_skills[selected[0]]);
                skills.push(base_skills[selected[1]]);
                skills.push(frandom_item_from(feats));
            } else if (klass == 1) {
                fanged_deserter_abilites.forEach(x => skills.push(x));
                skills.push(frandom_item_from(fanged_deserter_features));
            } else if (klass == 2) {
                gutterborn_abilities.forEach(x => skills.push(x));
                skills.push(frandom_item_from(gutterborn_features));
            } else if (klass == 3) {
                esoteric_hermit_abilities.forEach(x => skills.push(x));
                skills.push(frandom_item_from(esoteric_hermit_features));
            } else if (klass == 4) {
                wretched_royalty_abilities.forEach(x => skills.push(x));
                var wr_skill1 = frandom_item_from(wretched_royalty_features);
                var wr_skill2 = frandom_item_from(wretched_royalty_features_2);
                skills.push(wr_skill1);
                skills.push(wr_skill2);
            } else if (klass == 5) {
                heretical_priest_abilities.forEach(x => skills.push(x));
                skills.push(frandom_item_from(heretical_priest_features));
            } else if (klass == 6) {
                occult_herbmaster_abilities.forEach(x => skills.push(x));
            } else if (klass == 7) {
                forlorn_philosopher_abilities.forEach(x => skills.push(x));
                skills.push(frandom_item_from(forlorn_philosopher_features));
            } else if (klass == 8) {
                dead_gods_prophet_abilities.forEach(x => skills.push(x));
                two_unique(dead_gods_prophet_features).forEach(el => skills.push(el));
            } else if (klass == 9) {
                pale_one_abilities.forEach(x => skills.push(x));
                // pale_one_features.forEach(x => skills.push(x));
                // skills.push(frandom_item_from(pale_one_features));
            } else if (klass == 10) {
                cursed_skinwalker_abilities.forEach(x => skills.push(x));
                skills.push(frandom_item_from(cursed_skinwalker_features));
            } else if (klass == 11) {
                songbird_abilities.forEach(x => skills.push(x));
                skills.push(frandom_item_from(songbird_features));
            }
            for (var i = 0; i < skills.length; i++) {
                var tmp_text = `<p><strong>${skills[i][0]}</strong>`;
                if (skills[i][1] != '') {
                    tmp_text += `<br/>${skills[i][1]}`;
                }
                if (skills[i][2] != undefined) {
                    tmp_text += `<br/>${skills[i][2]}`;
                }
                tmp_text += `</p>`;
                document.getElementById("skills_short").innerHTML += `<p>${skills[i][0]}</p>`;
                document.getElementById("skills").innerHTML += tmp_text
            }

            var stats = []
            for (var i = 0; i < 4; i++) {
                if (klass == 0) {
                    stats.push(selected.includes(i.toString()) ? removeSmallest([fd(6), fd(6), fd(6), fd(6)]).reduce((partialSum, a) => partialSum + a, 0) : fd(6) + fd(6) + fd(6))
                } else {
                    stats.push(fd(6) + fd(6) + fd(6));
                }
            }
            if (klass == 1) {
                stats[0] -= 1;
                stats[1] -= 1;
                stats[2] += 2;
            } else if (klass == 2) {
                stats[2] -= 2;
            } else if (klass == 3 || klass == 5 || klass == 7) {
                stats[1] += 2;
                stats[2] -= 2;
            } else if (klass == 6) {
                stats[2] -= 2;
                stats[3] += 2;
            } else if (klass == 8 || klass == 11) {
                stats[1] += 2;
                stats[3] -= 2;
            } else if (klass == 9) {
                stats[0] += 1;
                stats[1] += 1;
                stats[3] -= 2;
            } else if (klass == 10) {
                stats[1] -= 2;
                stats[2] += 1;
                stats[3] += 1;
            }

            for (var i = 0; i < 4; i++) {
                stats[i] = abilities[stats[i] - 1];
            }
            function agilit√©() { return parseInt(stats[0]) || 0 }
            function pr√©sence() { return parseInt(stats[1]) || 0 }
            function force() { return parseInt(stats[2]) || 0 }
            function endurance() { return parseInt(stats[3]) || 0 }

            ['agilit√©', 'pr√©sence', 'force', 'endurance'].forEach((x, i) => {
                document.getElementById(x).innerHTML = stats[i];
                /* document.getElementById(x).parentNode.children[i * 2].innerHTML = `${x.toUpperCase()}` */
            })

            var hp_mod;
            if (klass == 0 || klass == 5 || klass == 10) {
                hp_mod = fd(8);
            } else if (klass == 1) {
                hp_mod = fd(10);
            } else if (klass == 2 || klass == 4 || klass == 6 || klass == 9 || klass == 11) {
                hp_mod = fd(6);
            } else if (klass == 3 || klass == 7 || klass == 8) {
                hp_mod = fd(4);
            }
            var hp = Math.max(1, endurance() + hp_mod);
            document.getElementById("max_hp").innerHTML = `${hp}`;

            var power = Math.max(0, pr√©sence() + fd(4));
            document.getElementById("powers").innerHTML = power;

            var omens;
            if (klass == 3 || klass == 5 || klass == 7 || klass == 9) {
                omens = [fd(4), 4];
            } else if (klass == 8) {
                omens = [fd(3), 3];
            } else {
                omens = [fd(2), 2];
            }
            document.getElementById("omens").innerHTML = omens[0];
            document.getElementById("omens_dice").innerHTML = `(d${omens[1]})`;

            var food = ["Outre d'eau", ` et ${fd(4)} jour(s) de nourriture`]
            var silver;
            if (klass == 0 || klass == 1 || klass == 6 || klass == 10) {
                silver = (fd(6) + fd(6)) * 10;
            } else if (klass == 2 || klass == 3 || klass == 7 || klass == 9) {
                silver = fd(6) * 10;
            } else if (klass == 4 || klass == 11) {
                silver = (fd(6) + fd(6) + fd(6) + fd(6)) * 10;
            } else if (klass == 5) {
                silver = (fd(6) + fd(6) + fd(6)) * 10;
            } else if (klass == 8) {
                silver = fd(6) * 5;
            }
            var w_light = ['B√¢ton', 'Pieu en bois', '√âp√©e courte', 'Couteau', 'Faucille', 'Gourdin'];
            var w_med = ['Marteau de guerre', '√âp√©e', 'Massue', 'Hachette', 'Masse', 'Lance', 'Faux'];
            var w_heavy = ['Fl√©au', 'Hache de bataille', 'Godendard'];
            var weapons = [
                ["F√©mur", "d4 d√©gats"],
                [frandom_item_from(w_light), "d4 d√©gats"],
                [frandom_item_from(w_light), "d4 d√©gats"],
                [frandom_item_from(w_light), "d4 d√©gats"],
                [frandom_item_from(w_med), "d6 d√©gats"],
                [frandom_item_from(w_med), "d6 d√©gats"],
                ["Arc", `d6 d√©gats, avec ${pr√©sence() + 10} fl√™ches`],
                [frandom_item_from(w_heavy), "d8 d√©gats"],
                ["Arbal√®te", `d8 d√©gats, avec ${pr√©sence() + 10} carreaux`],
                ["Zweih√§nder", "d10 d√©gats"]
            ]
            var light = ["de fourrure", "capitonn√©e", "de cuir"];
            var medium = ["d'√©cailles", "de maille"];
            var heavy = ["de lamelles", "de plaques"];
            var armor = [
                ["", ""],
                [`Armure ${frandom_item_from(light)}`, "-d2, tiers 1"],
                [`Armure ${frandom_item_from(medium)}`, "-d4, tiers 2, DR+2 pour les tests d'AGILIT√â incluant la D√©fense"],
                [`Armure ${frandom_item_from(heavy)}`, "-d6, tiers 3, DR+4 pour les tests d'AGILIT√â, D√©fense √† DR+2"],
            ]
            var equip1 = [
                ["", ""],
                ["", ""],
                ["Sac √† dos", "pour 7 objets de taille normale"],
                ["Sac", "pour 10 objets de taille normale"],
                ["Petite charrette", ""],
                ["√Çne", ""]
            ]
            var equip2 = [
                ["Corde", "30 pieds"],
                [`${pr√©sence() + 4} torches`, ""],
                ["Lanterne", `avec de l'huile pour ${pr√©sence() + 6} heures`],
                ["Bande de magn√©sium", ""],
                frandom_item_from(unclean_scrolls),
                ["Aiguille pointue", ""],
                ["Trousse de m√©decine", `${pr√©sence() + 4} utilisations (stoppe saignements/infections, +d6 PV)`],
                ["Lime en m√©tal et crochets de serrurier", ""],
                ["Pi√®ge √† ours", "PR√âSENCE DR14 pour rep√©rer, d8 d√©g√¢ts"],
                ["Bombe", "(bouteille scell√©e, d10 d√©g√¢ts)"],
                ["Une bouteille de poison rouge", `${fd(4)} doses (ENDURANCE DR12 ou d10 d√©g√¢ts)`],
                ["Crucifix en argent", ""],
                ["Couverture", ""],
                ["Pierre √† feu", ""],
                ["Tabac √† chiquer", `${fd(6)} utilisations`],
                ["Une bouteille de sel", ""],
                ["Crucifix en bois", ""],
                [`${fd(6)} b√¢tons de craie`, ""],
                ["Menottes", ""],
                ["Une bouteille de poison noir", `${fd(4)} doses (ENDURANCE DR14 ou d6 d√©g√¢ts + aveugle pendant une heure)`],
            ]
            var equip3 = [
                ["√âlixir de vie", `${fd(4)} doses (soigne d6 PV et enl√®ve l'infection)`],
                frandom_item_from(sacred_scrolls),
                ["Petit chien mais vicieux", `(${fd(6) + 2} PV, morsure d4, n'ob√©it qu'√† vous)`],
                [`${fd(4)} singe(s)`, ` qui vous ignore(nt) mais vous aime(nt) (${fd(4) + 2} PV, coup de poing/morsure d4)`],
                ["Parfum exquis", "vaut 25s"],
                ["Bo√Æte √† outils", "10 clous, pinces, marteau, petite scie, perceuse"],
                ["Cha√Æne lourde", "15 pieds"],
                ["Grappin", ""],
                ["Bouclier", "(-1 d√©g√¢t PV ou le bouclier se brise pour ignorer l'attaque)"],
                ["Pied-de-biche", "d4 d√©g√¢ts"],
                ["Lard", "(peut servir de 5 repas en cas de besoin)"],
                ["Tente", ""],
                [`${fd(6)} rat(s)`, " mod√©r√©ment apprivois√©(s) (1 PV, morsure d2, n'ob√©it qu'√† vous)"],
                ["Miroir", "vaut 15s"],
                ["Ciseaux", ""],
                ["Hachoir √† viande", "d4 d√©g√¢ts"],
                ["Chausse-trappes", "d4 d√©g√¢ts + infection sur 1-sur-6"],
                ["Marteau", "d4 d√©g√¢ts"],
                ["Pieu en bois", "d6 d√©g√¢ts"],
                ["Lacs", ""]
            ]

            document.getElementById("equipment").innerHTML += `<li>${food[0]}<br/><span class="small">${food[1]}</span></li>`;
            var e1 = frandom_item_from(equip1);
            var er2 = fd(20);
            var er3 = fd(20);
            var scroll = (er2 == 5 || er3 == 2);
            e2 = equip2[er2 - 1];
            e3 = equip3[er3 - 1];
            var starting_weapon;
            if (story == 16) {
                starting_weapon = ["Fronde", "d4 d√©gats avec une quantit√© illimit√©e de pierres"];
            } else {
                if (klass == 3 || klass == 8) {
                    starting_weapon = frandom_item_from(weapons.slice(0, 4));
                } else if (klass == 4 || klass == 5) {
                    starting_weapon = frandom_item_from(weapons.slice(0, 8));
                } else if (scroll || klass == 2 || klass == 6 || klass == 7 || klass == 9 || klass == 10 || klass == 11) {
                    starting_weapon = frandom_item_from(weapons.slice(0, 6));
                } else {
                    starting_weapon = frandom_item_from(weapons);
                }
            }
            document.getElementById("weapon").innerHTML += `${starting_weapon[0]} <span class="small">(${starting_weapon[1]})</span>`;
            // document.getElementById("weapon_2").innerHTML += `${starting_weapon[0]} (<span class="small">${starting_weapon[1]})</span>`;
            var starting_armor;
            if (klass == 4 || klass == 11) {
                starting_armor = frandom_item_from(armor.slice(0, 3));
            } else if (scroll || klass == 2 || klass == 3 || klass == 6 || klass == 7 || klass == 8 || klass == 9 || klass == 10) {
                starting_armor = frandom_item_from(armor.slice(0, 2));
            } else {
                starting_armor = frandom_item_from(armor);
            }
            if (starting_armor[0] != "") {
                document.getElementById("armor").innerHTML += `${starting_armor[0]} <span class="small">(${starting_armor[1]})</span>`;
            }
            var special_item;
            if (habit == 1) {
                special_item = ["Sac en toile", `et ${fd(20) + fd(20) + fd(20) + fd(20) + fd(20)} petites pierres coupantes`]
            } else if (habit == 7) {
                special_item = ["Cr√¢ne", "Un ami de confiance."]
            } else if (habit == 20) {
                special_item = ["Collier de cuir", `avec ${fd(10) + fd(10) + fd(10) + fd(10) + fd(10)} dent disparates`]
            } else if (habit == 29) {
                special_item = ["Sac en toile", `et ${fd(20) + fd(20) + fd(20) + fd(20) + fd(20)} ongles rong√©s`]
            }
            if (special_item) {
                document.getElementById("equipment").innerHTML += `<li>${special_item[0]}<br/><span class="small">${special_item[1]}</span></li>`;
            }
            if (e1[0] != "") {
                document.getElementById("equipment").innerHTML += `<li>${e1[0]}<br/><span class="small">${e1[1]}</span></li>`;
            }
            if (er2 == 5) {
                document.getElementById("scrolls").innerHTML += `<li>${e2[0]}<br/><span class="small">${e2[1]}</span></li>`;
            } else {
                document.getElementById("equipment").innerHTML += `<li>${e2[0]}<br/><span class="small">${e2[1]}</span></li>`;
            }
            if (er3 == 2) {
                document.getElementById("scrolls").innerHTML += `<li>${e3[0]}<br/><span class="small">${e3[1]}</span></li>`;
            } else if ((er3 >= 16 && er3 <= 19) || er3 == 10) {
                document.getElementById("weapon_2").innerHTML += `${e3[0]} <span class="small">(${e3[1]})</span>`;
            }
            else {
                document.getElementById("equipment").innerHTML += `<li>${e3[0]}<br/><span class="small">${e3[1]}</span></li>`;
            }
            if (klass == 3) {
                var eso_scroll = fd(2) == 1 ? frandom_item_from(sacred_scrolls) : frandom_item_from(unclean_scrolls);
                document.getElementById("scrolls").innerHTML += `<li>${eso_scroll[0]}<br/><span class="small">${eso_scroll[1]}</span></li>`;
            }
            if (klass == 7) {
                var for_tab = frandom_item_from(tablets);
                document.getElementById("scrolls").innerHTML += `<li>${for_tab[0]}<br/><span class="small">${for_tab[1]}</span></li>`;
            }
            document.getElementById("money").innerHTML += `${silver}s`;
        }

        function hide(x) {
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }
    </script>
</body>

</html>